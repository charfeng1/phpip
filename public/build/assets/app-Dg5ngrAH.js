var Ze=!1,et=!1,ee=[],tt=-1;function vn(e){yn(e)}function yn(e){ee.includes(e)||ee.push(e),bn()}function wn(e){let t=ee.indexOf(e);t!==-1&&t>tt&&ee.splice(t,1)}function bn(){!et&&!Ze&&(Ze=!0,queueMicrotask(_n))}function _n(){Ze=!1,et=!0;for(let e=0;e<ee.length;e++)ee[e](),tt=e;ee.length=0,tt=-1,et=!1}var le,ae,ce,nr,rt=!0;function xn(e){rt=!1,e(),rt=!0}function En(e){le=e.reactive,ce=e.release,ae=t=>e.effect(t,{scheduler:r=>{rt?vn(r):r()}}),nr=e.raw}function Ut(e){ae=e}function Sn(e){let t=()=>{};return[n=>{let s=ae(n);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(a=>a())}),e._x_effects.add(s),t=()=>{s!==void 0&&(e._x_effects.delete(s),ce(s))},s},()=>{t()}]}function sr(e,t){let r=!0,n,s=ae(()=>{let a=e();JSON.stringify(a),r?n=a:queueMicrotask(()=>{t(a,n),n=a}),r=!1});return()=>ce(s)}var ar=[],ir=[],or=[];function Ln(e){or.push(e)}function vt(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,ir.push(t))}function lr(e){ar.push(e)}function cr(e,t,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(r)}function dr(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([r,n])=>{(t===void 0||t.includes(r))&&(n.forEach(s=>s()),delete e._x_attributeCleanups[r])})}function kn(e){var t,r;for((t=e._x_effects)==null||t.forEach(wn);(r=e._x_cleanups)!=null&&r.length;)e._x_cleanups.pop()()}var yt=new MutationObserver(xt),wt=!1;function bt(){yt.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),wt=!0}function ur(){An(),yt.disconnect(),wt=!1}var pe=[];function An(){let e=yt.takeRecords();pe.push(()=>e.length>0&&xt(e));let t=pe.length;queueMicrotask(()=>{if(pe.length===t)for(;pe.length>0;)pe.shift()()})}function A(e){if(!wt)return e();ur();let t=e();return bt(),t}var _t=!1,qe=[];function Cn(){_t=!0}function Tn(){_t=!1,xt(qe),qe=[]}function xt(e){if(_t){qe=qe.concat(e);return}let t=[],r=new Set,n=new Map,s=new Map;for(let a=0;a<e.length;a++)if(!e[a].target._x_ignoreMutationObserver&&(e[a].type==="childList"&&(e[a].removedNodes.forEach(i=>{i.nodeType===1&&i._x_marker&&r.add(i)}),e[a].addedNodes.forEach(i=>{if(i.nodeType===1){if(r.has(i)){r.delete(i);return}i._x_marker||t.push(i)}})),e[a].type==="attributes")){let i=e[a].target,l=e[a].attributeName,c=e[a].oldValue,u=()=>{n.has(i)||n.set(i,[]),n.get(i).push({name:l,value:i.getAttribute(l)})},f=()=>{s.has(i)||s.set(i,[]),s.get(i).push(l)};i.hasAttribute(l)&&c===null?u():i.hasAttribute(l)?(f(),u()):f()}s.forEach((a,i)=>{dr(i,a)}),n.forEach((a,i)=>{ar.forEach(l=>l(i,a))});for(let a of r)t.some(i=>i.contains(a))||ir.forEach(i=>i(a));for(let a of t)a.isConnected&&or.forEach(i=>i(a));t=null,r=null,n=null,s=null}function fr(e){return Ee(ie(e))}function xe(e,t,r){return e._x_dataStack=[t,...ie(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(n=>n!==t)}}function ie(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?ie(e.host):e.parentNode?ie(e.parentNode):[]}function Ee(e){return new Proxy({objects:e},In)}var In={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(r=>Object.prototype.hasOwnProperty.call(r,t)||Reflect.has(r,t))},get({objects:e},t,r){return t=="toJSON"?On:Reflect.get(e.find(n=>Reflect.has(n,t))||{},t,r)},set({objects:e},t,r,n){const s=e.find(i=>Object.prototype.hasOwnProperty.call(i,t))||e[e.length-1],a=Object.getOwnPropertyDescriptor(s,t);return a!=null&&a.set&&(a!=null&&a.get)?a.set.call(n,r)||!0:Reflect.set(s,t,r)}};function On(){return Reflect.ownKeys(this).reduce((t,r)=>(t[r]=Reflect.get(this,r),t),{})}function hr(e){let t=n=>typeof n=="object"&&!Array.isArray(n)&&n!==null,r=(n,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([a,{value:i,enumerable:l}])=>{if(l===!1||i===void 0||typeof i=="object"&&i!==null&&i.__v_skip)return;let c=s===""?a:`${s}.${a}`;typeof i=="object"&&i!==null&&i._x_interceptor?n[a]=i.initialize(e,c,a):t(i)&&i!==n&&!(i instanceof Element)&&r(i,c)})};return r(e)}function pr(e,t=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(n,s,a){return e(this.initialValue,()=>Mn(n,s),i=>nt(n,s,i),s,a)}};return t(r),n=>{if(typeof n=="object"&&n!==null&&n._x_interceptor){let s=r.initialize.bind(r);r.initialize=(a,i,l)=>{let c=n.initialize(a,i,l);return r.initialValue=c,s(a,i,l)}}else r.initialValue=n;return r}}function Mn(e,t){return t.split(".").reduce((r,n)=>r[n],e)}function nt(e,t,r){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=r;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),nt(e[t[0]],t.slice(1),r)}}var gr={};function U(e,t){gr[e]=t}function st(e,t){let r=Pn(t);return Object.entries(gr).forEach(([n,s])=>{Object.defineProperty(e,`$${n}`,{get(){return s(t,r)},enumerable:!1})}),e}function Pn(e){let[t,r]=_r(e),n={interceptor:pr,...t};return vt(e,r),n}function Rn(e,t,r,...n){try{return r(...n)}catch(s){_e(s,e,t)}}function _e(e,t,r=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var Pe=!0;function mr(e){let t=Pe;Pe=!1;let r=e();return Pe=t,r}function te(e,t,r={}){let n;return q(e,t)(s=>n=s,r),n}function q(...e){return vr(...e)}var vr=yr;function qn(e){vr=e}function yr(e,t){let r={};st(r,e);let n=[r,...ie(e)],s=typeof t=="function"?$n(n,t):Nn(n,t,e);return Rn.bind(null,e,t,s)}function $n(e,t){return(r=()=>{},{scope:n={},params:s=[],context:a}={})=>{let i=t.apply(Ee([n,...e]),s);$e(r,i)}}var Xe={};function Dn(e,t){if(Xe[e])return Xe[e];let r=Object.getPrototypeOf(async function(){}).constructor,n=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,a=(()=>{try{let i=new r(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`);return Object.defineProperty(i,"name",{value:`[Alpine] ${e}`}),i}catch(i){return _e(i,t,e),Promise.resolve()}})();return Xe[e]=a,a}function Nn(e,t,r){let n=Dn(t,r);return(s=()=>{},{scope:a={},params:i=[],context:l}={})=>{n.result=void 0,n.finished=!1;let c=Ee([a,...e]);if(typeof n=="function"){let u=n.call(l,n,c).catch(f=>_e(f,r,t));n.finished?($e(s,n.result,c,i,r),n.result=void 0):u.then(f=>{$e(s,f,c,i,r)}).catch(f=>_e(f,r,t)).finally(()=>n.result=void 0)}}}function $e(e,t,r,n,s){if(Pe&&typeof t=="function"){let a=t.apply(r,n);a instanceof Promise?a.then(i=>$e(e,i,r,n)).catch(i=>_e(i,s,t)):e(a)}else typeof t=="object"&&t instanceof Promise?t.then(a=>e(a)):e(t)}var Et="x-";function de(e=""){return Et+e}function Fn(e){Et=e}var De={};function O(e,t){return De[e]=t,{before(r){if(!De[r]){console.warn(String.raw`Cannot find directive \`${r}\`. \`${e}\` will use the default order of execution`);return}const n=Z.indexOf(r);Z.splice(n>=0?n:Z.indexOf("DEFAULT"),0,e)}}}function Bn(e){return Object.keys(De).includes(e)}function St(e,t,r){if(t=Array.from(t),e._x_virtualDirectives){let a=Object.entries(e._x_virtualDirectives).map(([l,c])=>({name:l,value:c})),i=wr(a);a=a.map(l=>i.find(c=>c.name===l.name)?{name:`x-bind:${l.name}`,value:`"${l.value}"`}:l),t=t.concat(a)}let n={};return t.map(Sr((a,i)=>n[a]=i)).filter(kr).map(Un(n,r)).sort(Vn).map(a=>Hn(e,a))}function wr(e){return Array.from(e).map(Sr()).filter(t=>!kr(t))}var at=!1,ye=new Map,br=Symbol();function jn(e){at=!0;let t=Symbol();br=t,ye.set(t,[]);let r=()=>{for(;ye.get(t).length;)ye.get(t).shift()();ye.delete(t)},n=()=>{at=!1,r()};e(r),n()}function _r(e){let t=[],r=l=>t.push(l),[n,s]=Sn(e);return t.push(s),[{Alpine:Se,effect:n,cleanup:r,evaluateLater:q.bind(q,e),evaluate:te.bind(te,e)},()=>t.forEach(l=>l())]}function Hn(e,t){let r=()=>{},n=De[t.type]||r,[s,a]=_r(e);cr(e,t.original,a);let i=()=>{e._x_ignore||e._x_ignoreSelf||(n.inline&&n.inline(e,t,s),n=n.bind(n,e,t,s),at?ye.get(br).push(n):n())};return i.runCleanups=a,i}var xr=(e,t)=>({name:r,value:n})=>(r.startsWith(e)&&(r=r.replace(e,t)),{name:r,value:n}),Er=e=>e;function Sr(e=()=>{}){return({name:t,value:r})=>{let{name:n,value:s}=Lr.reduce((a,i)=>i(a),{name:t,value:r});return n!==t&&e(n,t),{name:n,value:s}}}var Lr=[];function Lt(e){Lr.push(e)}function kr({name:e}){return Ar().test(e)}var Ar=()=>new RegExp(`^${Et}([^:^.]+)\\b`);function Un(e,t){return({name:r,value:n})=>{let s=r.match(Ar()),a=r.match(/:([a-zA-Z0-9\-_:]+)/),i=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],l=t||e[r]||r;return{type:s?s[1]:null,value:a?a[1]:null,modifiers:i.map(c=>c.replace(".","")),expression:n,original:l}}}var it="DEFAULT",Z=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",it,"teleport"];function Vn(e,t){let r=Z.indexOf(e.type)===-1?it:e.type,n=Z.indexOf(t.type)===-1?it:t.type;return Z.indexOf(r)-Z.indexOf(n)}function we(e,t,r={}){e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function se(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(s=>se(s,t));return}let r=!1;if(t(e,()=>r=!0),r)return;let n=e.firstElementChild;for(;n;)se(n,t),n=n.nextElementSibling}function B(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Vt=!1;function Kn(){Vt&&B("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Vt=!0,document.body||B("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),we(document,"alpine:init"),we(document,"alpine:initializing"),bt(),Ln(t=>K(t,se)),vt(t=>fe(t)),lr((t,r)=>{St(t,r).forEach(n=>n())});let e=t=>!Be(t.parentElement,!0);Array.from(document.querySelectorAll(Ir().join(","))).filter(e).forEach(t=>{K(t)}),we(document,"alpine:initialized"),setTimeout(()=>{Jn()})}var kt=[],Cr=[];function Tr(){return kt.map(e=>e())}function Ir(){return kt.concat(Cr).map(e=>e())}function Or(e){kt.push(e)}function Mr(e){Cr.push(e)}function Be(e,t=!1){return ue(e,r=>{if((t?Ir():Tr()).some(s=>r.matches(s)))return!0})}function ue(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return ue(e.parentElement,t)}}function zn(e){return Tr().some(t=>e.matches(t))}var Pr=[];function Wn(e){Pr.push(e)}var Xn=1;function K(e,t=se,r=()=>{}){ue(e,n=>n._x_ignore)||jn(()=>{t(e,(n,s)=>{n._x_marker||(r(n,s),Pr.forEach(a=>a(n,s)),St(n,n.attributes).forEach(a=>a()),n._x_ignore||(n._x_marker=Xn++),n._x_ignore&&s())})})}function fe(e,t=se){t(e,r=>{kn(r),dr(r),delete r._x_marker})}function Jn(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,r,n])=>{Bn(r)||n.some(s=>{if(document.querySelector(s))return B(`found "${s}", but missing ${t} plugin`),!0})})}var ot=[],At=!1;function Ct(e=()=>{}){return queueMicrotask(()=>{At||setTimeout(()=>{lt()})}),new Promise(t=>{ot.push(()=>{e(),t()})})}function lt(){for(At=!1;ot.length;)ot.shift()()}function Gn(){At=!0}function Tt(e,t){return Array.isArray(t)?Kt(e,t.join(" ")):typeof t=="object"&&t!==null?Yn(e,t):typeof t=="function"?Tt(e,t()):Kt(e,t)}function Kt(e,t){let r=s=>s.split(" ").filter(a=>!e.classList.contains(a)).filter(Boolean),n=s=>(e.classList.add(...s),()=>{e.classList.remove(...s)});return t=t===!0?t="":t||"",n(r(t))}function Yn(e,t){let r=l=>l.split(" ").filter(Boolean),n=Object.entries(t).flatMap(([l,c])=>c?r(l):!1).filter(Boolean),s=Object.entries(t).flatMap(([l,c])=>c?!1:r(l)).filter(Boolean),a=[],i=[];return s.forEach(l=>{e.classList.contains(l)&&(e.classList.remove(l),i.push(l))}),n.forEach(l=>{e.classList.contains(l)||(e.classList.add(l),a.push(l))}),()=>{i.forEach(l=>e.classList.add(l)),a.forEach(l=>e.classList.remove(l))}}function je(e,t){return typeof t=="object"&&t!==null?Qn(e,t):Zn(e,t)}function Qn(e,t){let r={};return Object.entries(t).forEach(([n,s])=>{r[n]=e.style[n],n.startsWith("--")||(n=es(n)),e.style.setProperty(n,s)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{je(e,r)}}function Zn(e,t){let r=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",r||"")}}function es(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ct(e,t=()=>{}){let r=!1;return function(){r?t.apply(this,arguments):(r=!0,e.apply(this,arguments))}}O("transition",(e,{value:t,modifiers:r,expression:n},{evaluate:s})=>{typeof n=="function"&&(n=s(n)),n!==!1&&(!n||typeof n=="boolean"?rs(e,r,t):ts(e,n,t))});function ts(e,t,r){Rr(e,Tt,""),{enter:s=>{e._x_transition.enter.during=s},"enter-start":s=>{e._x_transition.enter.start=s},"enter-end":s=>{e._x_transition.enter.end=s},leave:s=>{e._x_transition.leave.during=s},"leave-start":s=>{e._x_transition.leave.start=s},"leave-end":s=>{e._x_transition.leave.end=s}}[r](t)}function rs(e,t,r){Rr(e,je);let n=!t.includes("in")&&!t.includes("out")&&!r,s=n||t.includes("in")||["enter"].includes(r),a=n||t.includes("out")||["leave"].includes(r);t.includes("in")&&!n&&(t=t.filter((h,y)=>y<t.indexOf("out"))),t.includes("out")&&!n&&(t=t.filter((h,y)=>y>t.indexOf("out")));let i=!t.includes("opacity")&&!t.includes("scale"),l=i||t.includes("opacity"),c=i||t.includes("scale"),u=l?0:1,f=c?ge(t,"scale",95)/100:1,o=ge(t,"delay",0)/1e3,d=ge(t,"origin","center"),p="opacity, transform",g=ge(t,"duration",150)/1e3,w=ge(t,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(e._x_transition.enter.during={transformOrigin:d,transitionDelay:`${o}s`,transitionProperty:p,transitionDuration:`${g}s`,transitionTimingFunction:m},e._x_transition.enter.start={opacity:u,transform:`scale(${f})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),a&&(e._x_transition.leave.during={transformOrigin:d,transitionDelay:`${o}s`,transitionProperty:p,transitionDuration:`${w}s`,transitionTimingFunction:m},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:u,transform:`scale(${f})`})}function Rr(e,t,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(n=()=>{},s=()=>{}){dt(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,s)},out(n=()=>{},s=()=>{}){dt(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,r,n){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let a=()=>s(r);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):a():e._x_transition?e._x_transition.in(r):a();return}e._x_hidePromise=e._x_transition?new Promise((i,l)=>{e._x_transition.out(()=>{},()=>i(n)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>l({isFromCancelledTransition:!0}))}):Promise.resolve(n),queueMicrotask(()=>{let i=qr(e);i?(i._x_hideChildren||(i._x_hideChildren=[]),i._x_hideChildren.push(e)):s(()=>{let l=c=>{let u=Promise.all([c._x_hidePromise,...(c._x_hideChildren||[]).map(l)]).then(([f])=>f==null?void 0:f());return delete c._x_hidePromise,delete c._x_hideChildren,u};l(e).catch(c=>{if(!c.isFromCancelledTransition)throw c})})})};function qr(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:qr(t)}function dt(e,t,{during:r,start:n,end:s}={},a=()=>{},i=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(n).length===0&&Object.keys(s).length===0){a(),i();return}let l,c,u;ns(e,{start(){l=t(e,n)},during(){c=t(e,r)},before:a,end(){l(),u=t(e,s)},after:i,cleanup(){c(),u()}})}function ns(e,t){let r,n,s,a=ct(()=>{A(()=>{r=!0,n||t.before(),s||(t.end(),lt()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(i){this.beforeCancels.push(i)},cancel:ct(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()}),finish:a},A(()=>{t.start(),t.during()}),Gn(),requestAnimationFrame(()=>{if(r)return;let i=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,l=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;i===0&&(i=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),A(()=>{t.before()}),n=!0,requestAnimationFrame(()=>{r||(A(()=>{t.end()}),lt(),setTimeout(e._x_transitioning.finish,i+l),s=!0)})})}function ge(e,t,r){if(e.indexOf(t)===-1)return r;const n=e[e.indexOf(t)+1];if(!n||t==="scale"&&isNaN(n))return r;if(t==="duration"||t==="delay"){let s=n.match(/([0-9]+)ms/);if(s)return s[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[n,e[e.indexOf(t)+2]].join(" "):n}var X=!1;function G(e,t=()=>{}){return(...r)=>X?t(...r):e(...r)}function ss(e){return(...t)=>X&&e(...t)}var $r=[];function He(e){$r.push(e)}function as(e,t){$r.forEach(r=>r(e,t)),X=!0,Dr(()=>{K(t,(r,n)=>{n(r,()=>{})})}),X=!1}var ut=!1;function is(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),X=!0,ut=!0,Dr(()=>{os(t)}),X=!1,ut=!1}function os(e){let t=!1;K(e,(n,s)=>{se(n,(a,i)=>{if(t&&zn(a))return i();t=!0,s(a,i)})})}function Dr(e){let t=ae;Ut((r,n)=>{let s=t(r);return ce(s),()=>{}}),e(),Ut(t)}function Nr(e,t,r,n=[]){switch(e._x_bindings||(e._x_bindings=le({})),e._x_bindings[t]=r,t=n.includes("camel")?gs(t):t,t){case"value":ls(e,r);break;case"style":ds(e,r);break;case"class":cs(e,r);break;case"selected":case"checked":us(e,t,r);break;default:Fr(e,t,r);break}}function ls(e,t){if(Hr(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=Re(e.value)===t:e.checked=zt(e.value,t));else if(It(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(r=>zt(r,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")ps(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function cs(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=Tt(e,t)}function ds(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=je(e,t)}function us(e,t,r){Fr(e,t,r),hs(e,t,r)}function Fr(e,t,r){[null,void 0,!1].includes(r)&&vs(t)?e.removeAttribute(t):(Br(t)&&(r=t),fs(e,t,r))}function fs(e,t,r){e.getAttribute(t)!=r&&e.setAttribute(t,r)}function hs(e,t,r){e[t]!==r&&(e[t]=r)}function ps(e,t){const r=[].concat(t).map(n=>n+"");Array.from(e.options).forEach(n=>{n.selected=r.includes(n.value)})}function gs(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function zt(e,t){return e==t}function Re(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var ms=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function Br(e){return ms.has(e)}function vs(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function ys(e,t,r){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:jr(e,t,r)}function ws(e,t,r,n=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let s=e._x_inlineBindings[t];return s.extract=n,mr(()=>te(e,s.expression))}return jr(e,t,r)}function jr(e,t,r){let n=e.getAttribute(t);return n===null?typeof r=="function"?r():r:n===""?!0:Br(t)?!![t,"true"].includes(n):n}function It(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function Hr(e){return e.type==="radio"||e.localName==="ui-radio"}function Ur(e,t){let r;return function(){const n=this,s=arguments,a=function(){r=null,e.apply(n,s)};clearTimeout(r),r=setTimeout(a,t)}}function Vr(e,t){let r;return function(){let n=this,s=arguments;r||(e.apply(n,s),r=!0,setTimeout(()=>r=!1,t))}}function Kr({get:e,set:t},{get:r,set:n}){let s=!0,a,i=ae(()=>{let l=e(),c=r();if(s)n(Je(l)),s=!1;else{let u=JSON.stringify(l),f=JSON.stringify(c);u!==a?n(Je(l)):u!==f&&t(Je(c))}a=JSON.stringify(e()),JSON.stringify(r())});return()=>{ce(i)}}function Je(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function bs(e){(Array.isArray(e)?e:[e]).forEach(r=>r(Se))}var Q={},Wt=!1;function _s(e,t){if(Wt||(Q=le(Q),Wt=!0),t===void 0)return Q[e];Q[e]=t,hr(Q[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Q[e].init()}function xs(){return Q}var zr={};function Es(e,t){let r=typeof t!="function"?()=>t:t;return e instanceof Element?Wr(e,r()):(zr[e]=r,()=>{})}function Ss(e){return Object.entries(zr).forEach(([t,r])=>{Object.defineProperty(e,t,{get(){return(...n)=>r(...n)}})}),e}function Wr(e,t,r){let n=[];for(;n.length;)n.pop()();let s=Object.entries(t).map(([i,l])=>({name:i,value:l})),a=wr(s);return s=s.map(i=>a.find(l=>l.name===i.name)?{name:`x-bind:${i.name}`,value:`"${i.value}"`}:i),St(e,s,r).map(i=>{n.push(i.runCleanups),i()}),()=>{for(;n.length;)n.pop()()}}var Xr={};function Ls(e,t){Xr[e]=t}function ks(e,t){return Object.entries(Xr).forEach(([r,n])=>{Object.defineProperty(e,r,{get(){return(...s)=>n.bind(t)(...s)},enumerable:!1})}),e}var As={get reactive(){return le},get release(){return ce},get effect(){return ae},get raw(){return nr},version:"3.15.0",flushAndStopDeferringMutations:Tn,dontAutoEvaluateFunctions:mr,disableEffectScheduling:xn,startObservingMutations:bt,stopObservingMutations:ur,setReactivityEngine:En,onAttributeRemoved:cr,onAttributesAdded:lr,closestDataStack:ie,skipDuringClone:G,onlyDuringClone:ss,addRootSelector:Or,addInitSelector:Mr,interceptClone:He,addScopeToNode:xe,deferMutations:Cn,mapAttributes:Lt,evaluateLater:q,interceptInit:Wn,setEvaluator:qn,mergeProxies:Ee,extractProp:ws,findClosest:ue,onElRemoved:vt,closestRoot:Be,destroyTree:fe,interceptor:pr,transition:dt,setStyles:je,mutateDom:A,directive:O,entangle:Kr,throttle:Vr,debounce:Ur,evaluate:te,initTree:K,nextTick:Ct,prefixed:de,prefix:Fn,plugin:bs,magic:U,store:_s,start:Kn,clone:is,cloneNode:as,bound:ys,$data:fr,watch:sr,walk:se,data:Ls,bind:Es},Se=As;function Cs(e,t){const r=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)r[n[s]]=!0;return s=>!!r[s]}var Ts=Object.freeze({}),Is=Object.prototype.hasOwnProperty,Ue=(e,t)=>Is.call(e,t),re=Array.isArray,be=e=>Jr(e)==="[object Map]",Os=e=>typeof e=="string",Ot=e=>typeof e=="symbol",Ve=e=>e!==null&&typeof e=="object",Ms=Object.prototype.toString,Jr=e=>Ms.call(e),Gr=e=>Jr(e).slice(8,-1),Mt=e=>Os(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ps=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Rs=Ps(e=>e.charAt(0).toUpperCase()+e.slice(1)),Yr=(e,t)=>e!==t&&(e===e||t===t),ft=new WeakMap,me=[],V,ne=Symbol("iterate"),ht=Symbol("Map key iterate");function qs(e){return e&&e._isEffect===!0}function $s(e,t=Ts){qs(e)&&(e=e.raw);const r=Fs(e,t);return t.lazy||r(),r}function Ds(e){e.active&&(Qr(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var Ns=0;function Fs(e,t){const r=function(){if(!r.active)return e();if(!me.includes(r)){Qr(r);try{return js(),me.push(r),V=r,e()}finally{me.pop(),Zr(),V=me[me.length-1]}}};return r.id=Ns++,r.allowRecurse=!!t.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=t,r}function Qr(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}var oe=!0,Pt=[];function Bs(){Pt.push(oe),oe=!1}function js(){Pt.push(oe),oe=!0}function Zr(){const e=Pt.pop();oe=e===void 0?!0:e}function H(e,t,r){if(!oe||V===void 0)return;let n=ft.get(e);n||ft.set(e,n=new Map);let s=n.get(r);s||n.set(r,s=new Set),s.has(V)||(s.add(V),V.deps.push(s),V.options.onTrack&&V.options.onTrack({effect:V,target:e,type:t,key:r}))}function J(e,t,r,n,s,a){const i=ft.get(e);if(!i)return;const l=new Set,c=f=>{f&&f.forEach(o=>{(o!==V||o.allowRecurse)&&l.add(o)})};if(t==="clear")i.forEach(c);else if(r==="length"&&re(e))i.forEach((f,o)=>{(o==="length"||o>=n)&&c(f)});else switch(r!==void 0&&c(i.get(r)),t){case"add":re(e)?Mt(r)&&c(i.get("length")):(c(i.get(ne)),be(e)&&c(i.get(ht)));break;case"delete":re(e)||(c(i.get(ne)),be(e)&&c(i.get(ht)));break;case"set":be(e)&&c(i.get(ne));break}const u=f=>{f.options.onTrigger&&f.options.onTrigger({effect:f,target:e,key:r,type:t,newValue:n,oldValue:s,oldTarget:a}),f.options.scheduler?f.options.scheduler(f):f()};l.forEach(u)}var Hs=Cs("__proto__,__v_isRef,__isVue"),en=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Ot)),Us=tn(),Vs=tn(!0),Xt=Ks();function Ks(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=L(this);for(let a=0,i=this.length;a<i;a++)H(n,"get",a+"");const s=n[t](...r);return s===-1||s===!1?n[t](...r.map(L)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Bs();const n=L(this)[t].apply(this,r);return Zr(),n}}),e}function tn(e=!1,t=!1){return function(n,s,a){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&a===(e?t?aa:an:t?sa:sn).get(n))return n;const i=re(n);if(!e&&i&&Ue(Xt,s))return Reflect.get(Xt,s,a);const l=Reflect.get(n,s,a);return(Ot(s)?en.has(s):Hs(s))||(e||H(n,"get",s),t)?l:pt(l)?!i||!Mt(s)?l.value:l:Ve(l)?e?on(l):Dt(l):l}}var zs=Ws();function Ws(e=!1){return function(r,n,s,a){let i=r[n];if(!e&&(s=L(s),i=L(i),!re(r)&&pt(i)&&!pt(s)))return i.value=s,!0;const l=re(r)&&Mt(n)?Number(n)<r.length:Ue(r,n),c=Reflect.set(r,n,s,a);return r===L(a)&&(l?Yr(s,i)&&J(r,"set",n,s,i):J(r,"add",n,s)),c}}function Xs(e,t){const r=Ue(e,t),n=e[t],s=Reflect.deleteProperty(e,t);return s&&r&&J(e,"delete",t,void 0,n),s}function Js(e,t){const r=Reflect.has(e,t);return(!Ot(t)||!en.has(t))&&H(e,"has",t),r}function Gs(e){return H(e,"iterate",re(e)?"length":ne),Reflect.ownKeys(e)}var Ys={get:Us,set:zs,deleteProperty:Xs,has:Js,ownKeys:Gs},Qs={get:Vs,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Rt=e=>Ve(e)?Dt(e):e,qt=e=>Ve(e)?on(e):e,$t=e=>e,Ke=e=>Reflect.getPrototypeOf(e);function Ce(e,t,r=!1,n=!1){e=e.__v_raw;const s=L(e),a=L(t);t!==a&&!r&&H(s,"get",t),!r&&H(s,"get",a);const{has:i}=Ke(s),l=n?$t:r?qt:Rt;if(i.call(s,t))return l(e.get(t));if(i.call(s,a))return l(e.get(a));e!==s&&e.get(t)}function Te(e,t=!1){const r=this.__v_raw,n=L(r),s=L(e);return e!==s&&!t&&H(n,"has",e),!t&&H(n,"has",s),e===s?r.has(e):r.has(e)||r.has(s)}function Ie(e,t=!1){return e=e.__v_raw,!t&&H(L(e),"iterate",ne),Reflect.get(e,"size",e)}function Jt(e){e=L(e);const t=L(this);return Ke(t).has.call(t,e)||(t.add(e),J(t,"add",e,e)),this}function Gt(e,t){t=L(t);const r=L(this),{has:n,get:s}=Ke(r);let a=n.call(r,e);a?nn(r,n,e):(e=L(e),a=n.call(r,e));const i=s.call(r,e);return r.set(e,t),a?Yr(t,i)&&J(r,"set",e,t,i):J(r,"add",e,t),this}function Yt(e){const t=L(this),{has:r,get:n}=Ke(t);let s=r.call(t,e);s?nn(t,r,e):(e=L(e),s=r.call(t,e));const a=n?n.call(t,e):void 0,i=t.delete(e);return s&&J(t,"delete",e,void 0,a),i}function Qt(){const e=L(this),t=e.size!==0,r=be(e)?new Map(e):new Set(e),n=e.clear();return t&&J(e,"clear",void 0,void 0,r),n}function Oe(e,t){return function(n,s){const a=this,i=a.__v_raw,l=L(i),c=t?$t:e?qt:Rt;return!e&&H(l,"iterate",ne),i.forEach((u,f)=>n.call(s,c(u),c(f),a))}}function Me(e,t,r){return function(...n){const s=this.__v_raw,a=L(s),i=be(a),l=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,u=s[e](...n),f=r?$t:t?qt:Rt;return!t&&H(a,"iterate",c?ht:ne),{next(){const{value:o,done:d}=u.next();return d?{value:o,done:d}:{value:l?[f(o[0]),f(o[1])]:f(o),done:d}},[Symbol.iterator](){return this}}}}function W(e){return function(...t){{const r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Rs(e)} operation ${r}failed: target is readonly.`,L(this))}return e==="delete"?!1:this}}function Zs(){const e={get(a){return Ce(this,a)},get size(){return Ie(this)},has:Te,add:Jt,set:Gt,delete:Yt,clear:Qt,forEach:Oe(!1,!1)},t={get(a){return Ce(this,a,!1,!0)},get size(){return Ie(this)},has:Te,add:Jt,set:Gt,delete:Yt,clear:Qt,forEach:Oe(!1,!0)},r={get(a){return Ce(this,a,!0)},get size(){return Ie(this,!0)},has(a){return Te.call(this,a,!0)},add:W("add"),set:W("set"),delete:W("delete"),clear:W("clear"),forEach:Oe(!0,!1)},n={get(a){return Ce(this,a,!0,!0)},get size(){return Ie(this,!0)},has(a){return Te.call(this,a,!0)},add:W("add"),set:W("set"),delete:W("delete"),clear:W("clear"),forEach:Oe(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Me(a,!1,!1),r[a]=Me(a,!0,!1),t[a]=Me(a,!1,!0),n[a]=Me(a,!0,!0)}),[e,r,t,n]}var[ea,ta]=Zs();function rn(e,t){const r=e?ta:ea;return(n,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Ue(r,s)&&s in n?r:n,s,a)}var ra={get:rn(!1)},na={get:rn(!0)};function nn(e,t,r){const n=L(r);if(n!==r&&t.call(e,n)){const s=Gr(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var sn=new WeakMap,sa=new WeakMap,an=new WeakMap,aa=new WeakMap;function ia(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oa(e){return e.__v_skip||!Object.isExtensible(e)?0:ia(Gr(e))}function Dt(e){return e&&e.__v_isReadonly?e:ln(e,!1,Ys,ra,sn)}function on(e){return ln(e,!0,Qs,na,an)}function ln(e,t,r,n,s){if(!Ve(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=s.get(e);if(a)return a;const i=oa(e);if(i===0)return e;const l=new Proxy(e,i===2?n:r);return s.set(e,l),l}function L(e){return e&&L(e.__v_raw)||e}function pt(e){return!!(e&&e.__v_isRef===!0)}U("nextTick",()=>Ct);U("dispatch",e=>we.bind(we,e));U("watch",(e,{evaluateLater:t,cleanup:r})=>(n,s)=>{let a=t(n),l=sr(()=>{let c;return a(u=>c=u),c},s);r(l)});U("store",xs);U("data",e=>fr(e));U("root",e=>Be(e));U("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=Ee(la(e))),e._x_refs_proxy));function la(e){let t=[];return ue(e,r=>{r._x_refs&&t.push(r._x_refs)}),t}var Ge={};function cn(e){return Ge[e]||(Ge[e]=0),++Ge[e]}function ca(e,t){return ue(e,r=>{if(r._x_ids&&r._x_ids[t])return!0})}function da(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=cn(t))}U("id",(e,{cleanup:t})=>(r,n=null)=>{let s=`${r}${n?`-${n}`:""}`;return ua(e,s,t,()=>{let a=ca(e,r),i=a?a._x_ids[r]:cn(r);return n?`${r}-${i}-${n}`:`${r}-${i}`})});He((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function ua(e,t,r,n){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let s=n();return e._x_id[t]=s,r(()=>{delete e._x_id[t]}),s}U("el",e=>e);dn("Focus","focus","focus");dn("Persist","persist","persist");function dn(e,t,r){U(t,n=>B(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}O("modelable",(e,{expression:t},{effect:r,evaluateLater:n,cleanup:s})=>{let a=n(t),i=()=>{let f;return a(o=>f=o),f},l=n(`${t} = __placeholder`),c=f=>l(()=>{},{scope:{__placeholder:f}}),u=i();c(u),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let f=e._x_model.get,o=e._x_model.set,d=Kr({get(){return f()},set(p){o(p)}},{get(){return i()},set(p){c(p)}});s(d)})});O("teleport",(e,{modifiers:t,expression:r},{cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&B("x-teleport can only be used on a <template> tag",e);let s=Zt(r),a=e.content.cloneNode(!0).firstElementChild;e._x_teleport=a,a._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),a.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(l=>{a.addEventListener(l,c=>{c.stopPropagation(),e.dispatchEvent(new c.constructor(c.type,c))})}),xe(a,{},e);let i=(l,c,u)=>{u.includes("prepend")?c.parentNode.insertBefore(l,c):u.includes("append")?c.parentNode.insertBefore(l,c.nextSibling):c.appendChild(l)};A(()=>{i(a,s,t),G(()=>{K(a)})()}),e._x_teleportPutBack=()=>{let l=Zt(r);A(()=>{i(e._x_teleport,l,t)})},n(()=>A(()=>{a.remove(),fe(a)}))});var fa=document.createElement("div");function Zt(e){let t=G(()=>document.querySelector(e),()=>fa)();return t||B(`Cannot find x-teleport element for selector: "${e}"`),t}var un=()=>{};un.inline=(e,{modifiers:t},{cleanup:r})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};O("ignore",un);O("effect",G((e,{expression:t},{effect:r})=>{r(q(e,t))}));function gt(e,t,r,n){let s=e,a=c=>n(c),i={},l=(c,u)=>f=>u(c,f);if(r.includes("dot")&&(t=ha(t)),r.includes("camel")&&(t=pa(t)),r.includes("passive")&&(i.passive=!0),r.includes("capture")&&(i.capture=!0),r.includes("window")&&(s=window),r.includes("document")&&(s=document),r.includes("debounce")){let c=r[r.indexOf("debounce")+1]||"invalid-wait",u=Ne(c.split("ms")[0])?Number(c.split("ms")[0]):250;a=Ur(a,u)}if(r.includes("throttle")){let c=r[r.indexOf("throttle")+1]||"invalid-wait",u=Ne(c.split("ms")[0])?Number(c.split("ms")[0]):250;a=Vr(a,u)}return r.includes("prevent")&&(a=l(a,(c,u)=>{u.preventDefault(),c(u)})),r.includes("stop")&&(a=l(a,(c,u)=>{u.stopPropagation(),c(u)})),r.includes("once")&&(a=l(a,(c,u)=>{c(u),s.removeEventListener(t,a,i)})),(r.includes("away")||r.includes("outside"))&&(s=document,a=l(a,(c,u)=>{e.contains(u.target)||u.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&c(u))})),r.includes("self")&&(a=l(a,(c,u)=>{u.target===e&&c(u)})),(ma(t)||fn(t))&&(a=l(a,(c,u)=>{va(u,r)||c(u)})),s.addEventListener(t,a,i),()=>{s.removeEventListener(t,a,i)}}function ha(e){return e.replace(/-/g,".")}function pa(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function Ne(e){return!Array.isArray(e)&&!isNaN(e)}function ga(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function ma(e){return["keydown","keyup"].includes(e)}function fn(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function va(e,t){let r=t.filter(a=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(a));if(r.includes("debounce")){let a=r.indexOf("debounce");r.splice(a,Ne((r[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let a=r.indexOf("throttle");r.splice(a,Ne((r[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&er(e.key).includes(r[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(a=>r.includes(a));return r=r.filter(a=>!s.includes(a)),!(s.length>0&&s.filter(i=>((i==="cmd"||i==="super")&&(i="meta"),e[`${i}Key`])).length===s.length&&(fn(e.type)||er(e.key).includes(r[0])))}function er(e){if(!e)return[];e=ga(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(r=>{if(t[r]===e)return r}).filter(r=>r)}O("model",(e,{modifiers:t,expression:r},{effect:n,cleanup:s})=>{let a=e;t.includes("parent")&&(a=e.parentNode);let i=q(a,r),l;typeof r=="string"?l=q(a,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?l=q(a,`${r()} = __placeholder`):l=()=>{};let c=()=>{let d;return i(p=>d=p),tr(d)?d.get():d},u=d=>{let p;i(g=>p=g),tr(p)?p.set(d):l(()=>{},{scope:{__placeholder:d}})};typeof r=="string"&&e.type==="radio"&&A(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});let f=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input",o=X?()=>{}:gt(e,f,t,d=>{u(Ye(e,t,d,c()))});if(t.includes("fill")&&([void 0,null,""].includes(c())||It(e)&&Array.isArray(c())||e.tagName.toLowerCase()==="select"&&e.multiple)&&u(Ye(e,t,{target:e},c())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=o,s(()=>e._x_removeModelListeners.default()),e.form){let d=gt(e.form,"reset",[],p=>{Ct(()=>e._x_model&&e._x_model.set(Ye(e,t,{target:e},c())))});s(()=>d())}e._x_model={get(){return c()},set(d){u(d)}},e._x_forceModelUpdate=d=>{d===void 0&&typeof r=="string"&&r.match(/\./)&&(d=""),window.fromModel=!0,A(()=>Nr(e,"value",d)),delete window.fromModel},n(()=>{let d=c();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(d)})});function Ye(e,t,r,n){return A(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return r.detail!==null&&r.detail!==void 0?r.detail:r.target.value;if(It(e))if(Array.isArray(n)){let s=null;return t.includes("number")?s=Qe(r.target.value):t.includes("boolean")?s=Re(r.target.value):s=r.target.value,r.target.checked?n.includes(s)?n:n.concat([s]):n.filter(a=>!ya(a,s))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(r.target.selectedOptions).map(s=>{let a=s.value||s.text;return Qe(a)}):t.includes("boolean")?Array.from(r.target.selectedOptions).map(s=>{let a=s.value||s.text;return Re(a)}):Array.from(r.target.selectedOptions).map(s=>s.value||s.text);{let s;return Hr(e)?r.target.checked?s=r.target.value:s=n:s=r.target.value,t.includes("number")?Qe(s):t.includes("boolean")?Re(s):t.includes("trim")?s.trim():s}}})}function Qe(e){let t=e?parseFloat(e):null;return wa(t)?t:e}function ya(e,t){return e==t}function wa(e){return!Array.isArray(e)&&!isNaN(e)}function tr(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}O("cloak",e=>queueMicrotask(()=>A(()=>e.removeAttribute(de("cloak")))));Mr(()=>`[${de("init")}]`);O("init",G((e,{expression:t},{evaluate:r})=>typeof t=="string"?!!t.trim()&&r(t,{},!1):r(t,{},!1)));O("text",(e,{expression:t},{effect:r,evaluateLater:n})=>{let s=n(t);r(()=>{s(a=>{A(()=>{e.textContent=a})})})});O("html",(e,{expression:t},{effect:r,evaluateLater:n})=>{let s=n(t);r(()=>{s(a=>{A(()=>{e.innerHTML=a,e._x_ignoreSelf=!0,K(e),delete e._x_ignoreSelf})})})});Lt(xr(":",Er(de("bind:"))));var hn=(e,{value:t,modifiers:r,expression:n,original:s},{effect:a,cleanup:i})=>{if(!t){let c={};Ss(c),q(e,n)(f=>{Wr(e,f,s)},{scope:c});return}if(t==="key")return ba(e,n);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let l=q(e,n);a(()=>l(c=>{c===void 0&&typeof n=="string"&&n.match(/\./)&&(c=""),A(()=>Nr(e,t,c,r))})),i(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};hn.inline=(e,{value:t,modifiers:r,expression:n})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:n,extract:!1})};O("bind",hn);function ba(e,t){e._x_keyExpression=t}Or(()=>`[${de("data")}]`);O("data",(e,{expression:t},{cleanup:r})=>{if(_a(e))return;t=t===""?"{}":t;let n={};st(n,e);let s={};ks(s,n);let a=te(e,t,{scope:s});(a===void 0||a===!0)&&(a={}),st(a,e);let i=le(a);hr(i);let l=xe(e,i);i.init&&te(e,i.init),r(()=>{i.destroy&&te(e,i.destroy),l()})});He((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function _a(e){return X?ut?!0:e.hasAttribute("data-has-alpine-state"):!1}O("show",(e,{modifiers:t,expression:r},{effect:n})=>{let s=q(e,r);e._x_doHide||(e._x_doHide=()=>{A(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{A(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let a=()=>{e._x_doHide(),e._x_isShown=!1},i=()=>{e._x_doShow(),e._x_isShown=!0},l=()=>setTimeout(i),c=ct(o=>o?i():a(),o=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,o,i,a):o?l():a()}),u,f=!0;n(()=>s(o=>{!f&&o===u||(t.includes("immediate")&&(o?l():a()),c(o),u=o,f=!1)}))});O("for",(e,{expression:t},{effect:r,cleanup:n})=>{let s=Ea(t),a=q(e,s.items),i=q(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>xa(e,s,a,i)),n(()=>{Object.values(e._x_lookup).forEach(l=>A(()=>{fe(l),l.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function xa(e,t,r,n){let s=i=>typeof i=="object"&&!Array.isArray(i),a=e;r(i=>{Sa(i)&&i>=0&&(i=Array.from(Array(i).keys(),m=>m+1)),i===void 0&&(i=[]);let l=e._x_lookup,c=e._x_prevKeys,u=[],f=[];if(s(i))i=Object.entries(i).map(([m,h])=>{let y=rr(t,h,m,i);n(_=>{f.includes(_)&&B("Duplicate key on x-for",e),f.push(_)},{scope:{index:m,...y}}),u.push(y)});else for(let m=0;m<i.length;m++){let h=rr(t,i[m],m,i);n(y=>{f.includes(y)&&B("Duplicate key on x-for",e),f.push(y)},{scope:{index:m,...h}}),u.push(h)}let o=[],d=[],p=[],g=[];for(let m=0;m<c.length;m++){let h=c[m];f.indexOf(h)===-1&&p.push(h)}c=c.filter(m=>!p.includes(m));let w="template";for(let m=0;m<f.length;m++){let h=f[m],y=c.indexOf(h);if(y===-1)c.splice(m,0,h),o.push([w,m]);else if(y!==m){let _=c.splice(m,1)[0],x=c.splice(y-1,1)[0];c.splice(m,0,x),c.splice(y,0,_),d.push([_,x])}else g.push(h);w=h}for(let m=0;m<p.length;m++){let h=p[m];h in l&&(A(()=>{fe(l[h]),l[h].remove()}),delete l[h])}for(let m=0;m<d.length;m++){let[h,y]=d[m],_=l[h],x=l[y],E=document.createElement("div");A(()=>{x||B('x-for ":key" is undefined or invalid',a,y,l),x.after(E),_.after(x),x._x_currentIfEl&&x.after(x._x_currentIfEl),E.before(_),_._x_currentIfEl&&_.after(_._x_currentIfEl),E.remove()}),x._x_refreshXForScope(u[f.indexOf(y)])}for(let m=0;m<o.length;m++){let[h,y]=o[m],_=h==="template"?a:l[h];_._x_currentIfEl&&(_=_._x_currentIfEl);let x=u[y],E=f[y],b=document.importNode(a.content,!0).firstElementChild,C=le(x);xe(b,C,a),b._x_refreshXForScope=$=>{Object.entries($).forEach(([P,M])=>{C[P]=M})},A(()=>{_.after(b),G(()=>K(b))()}),typeof E=="object"&&B("x-for key cannot be an object, it must be a string or an integer",a),l[E]=b}for(let m=0;m<g.length;m++)l[g[m]]._x_refreshXForScope(u[f.indexOf(g[m])]);a._x_prevKeys=f})}function Ea(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=e.match(n);if(!s)return;let a={};a.items=s[2].trim();let i=s[1].replace(r,"").trim(),l=i.match(t);return l?(a.item=i.replace(t,"").trim(),a.index=l[1].trim(),l[2]&&(a.collection=l[2].trim())):a.item=i,a}function rr(e,t,r,n){let s={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(i=>i.trim()).forEach((i,l)=>{s[i]=t[l]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(i=>i.trim()).forEach(i=>{s[i]=t[i]}):s[e.item]=t,e.index&&(s[e.index]=r),e.collection&&(s[e.collection]=n),s}function Sa(e){return!Array.isArray(e)&&!isNaN(e)}function pn(){}pn.inline=(e,{expression:t},{cleanup:r})=>{let n=Be(e);n._x_refs||(n._x_refs={}),n._x_refs[t]=e,r(()=>delete n._x_refs[t])};O("ref",pn);O("if",(e,{expression:t},{effect:r,cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&B("x-if can only be used on a <template> tag",e);let s=q(e,t),a=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let l=e.content.cloneNode(!0).firstElementChild;return xe(l,{},e),A(()=>{e.after(l),G(()=>K(l))()}),e._x_currentIfEl=l,e._x_undoIf=()=>{A(()=>{fe(l),l.remove()}),delete e._x_currentIfEl},l},i=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};r(()=>s(l=>{l?a():i()})),n(()=>e._x_undoIf&&e._x_undoIf())});O("id",(e,{expression:t},{evaluate:r})=>{r(t).forEach(s=>da(e,s))});He((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});Lt(xr("@",Er(de("on:"))));O("on",G((e,{value:t,modifiers:r,expression:n},{cleanup:s})=>{let a=n?q(e,n):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let i=gt(e,t,r,l=>{a(()=>{},{scope:{$event:l},params:[l]})});s(()=>i())}));ze("Collapse","collapse","collapse");ze("Intersect","intersect","intersect");ze("Focus","trap","focus");ze("Mask","mask","mask");function ze(e,t,r){O(t,n=>B(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}Se.setEvaluator(yr);Se.setReactivityEngine({reactive:Dt,effect:$s,release:Ds,raw:L});var La=Se,Nt=La;function ka(){return{open:!1,x:0,y:0,items:[],target:null,highlightedIndex:-1,init(){this.$el.addEventListener("context-menu",e=>{this.show(e.detail.event,e.detail.items,e.detail.target)}),this._handleKeydown=e=>{this.open&&this.handleKeydown(e)},this._handleClick=e=>{var t;this.open&&!((t=this.$refs.menu)!=null&&t.contains(e.target))&&this.close()},this._handleScroll=()=>{this.open&&this.close()},document.addEventListener("keydown",this._handleKeydown),document.addEventListener("click",this._handleClick),document.addEventListener("scroll",this._handleScroll,!0)},destroy(){document.removeEventListener("keydown",this._handleKeydown),document.removeEventListener("click",this._handleClick),document.removeEventListener("scroll",this._handleScroll,!0)},show(e,t,r=null){e.preventDefault(),e.stopPropagation(),this.items=t.filter(i=>!i.hidden),this.target=r,this.highlightedIndex=-1;const n=8;let s=e.clientX,a=e.clientY;this.x=s,this.y=a,this.open=!0,this.$nextTick(()=>{const i=this.$refs.menu;if(!i)return;const l=i.getBoundingClientRect(),c=window.innerWidth,u=window.innerHeight;s+l.width>c-n&&(s=c-l.width-n),s<n&&(s=n),a+l.height>u-n&&(a=u-l.height-n),a<n&&(a=n),this.x=s,this.y=a,i.focus()})},close(){this.open=!1,this.items=[],this.target=null,this.highlightedIndex=-1},execute(e){e.disabled||(e.action&&typeof e.action=="function"?e.action(this.target):e.href?window.location.href=e.href:e.dispatch&&this.$dispatch(e.dispatch.event,e.dispatch.detail),this.close())},handleKeydown(e){const t=this.items.filter(r=>r.type!=="divider"&&!r.disabled);switch(e.key){case"Escape":e.preventDefault(),this.close();break;case"ArrowDown":e.preventDefault(),this.highlightNext(t);break;case"ArrowUp":e.preventDefault(),this.highlightPrevious(t);break;case"Enter":case" ":if(e.preventDefault(),this.highlightedIndex>=0){const r=t[this.highlightedIndex];r&&this.execute(r)}break;case"Home":e.preventDefault(),this.highlightedIndex=0;break;case"End":e.preventDefault(),this.highlightedIndex=t.length-1;break;default:if(e.key.length===1&&!e.ctrlKey&&!e.metaKey){const r=e.key.toLowerCase(),n=this.highlightedIndex+1,s=t.findIndex((a,i)=>{var l;return i>=n&&((l=a.label)==null?void 0:l.toLowerCase().startsWith(r))});if(s>=0)this.highlightedIndex=s;else{const a=t.findIndex(i=>{var l;return(l=i.label)==null?void 0:l.toLowerCase().startsWith(r)});a>=0&&(this.highlightedIndex=a)}}break}},highlightNext(e){this.highlightedIndex<e.length-1?this.highlightedIndex++:this.highlightedIndex=0},highlightPrevious(e){this.highlightedIndex>0?this.highlightedIndex--:this.highlightedIndex=e.length-1},isHighlighted(e){return this.items.filter(r=>r.type!=="divider"&&!r.disabled)[this.highlightedIndex]===e},formatShortcut(e){if(!e)return"";const t=navigator.platform.toUpperCase().indexOf("MAC")>=0;return e.replace(/Cmd\+/gi,t?"⌘":"Ctrl+").replace(/Ctrl\+/gi,t?"⌃":"Ctrl+").replace(/Alt\+/gi,t?"⌥":"Alt+").replace(/Shift\+/gi,t?"⇧":"Shift+").replace(/Enter/gi,"↵").replace(/Delete/gi,t?"⌫":"Del").replace(/Backspace/gi,t?"⌫":"Bksp").replace(/Escape/gi,"Esc").replace(/ArrowUp/gi,"↑").replace(/ArrowDown/gi,"↓").replace(/ArrowLeft/gi,"←").replace(/ArrowRight/gi,"→")},getItemIndex(e){return this.items.indexOf(e)}}}function Aa(){return{showHelp:!1,shortcuts:new Map,sequenceBuffer:"",sequenceTimeout:null,lastKeyTime:0,init(){this.registerDefaults()},registerDefaults(){this.register("?",()=>this.toggleHelp(),"Show keyboard shortcuts","General"),this.register("g m",()=>this.navigate("/matter"),"Go to matters","Navigation"),this.register("g t",()=>this.navigate("/task"),"Go to tasks","Navigation"),this.register("g r",()=>this.navigate("/renewal"),"Go to renewals","Navigation"),this.register("g a",()=>this.navigate("/actor"),"Go to actors","Navigation"),this.register("g h",()=>this.navigate("/"),"Go to home","Navigation"),this.register("ctrl+n",()=>this.dispatch("create-matter"),"Create new matter","Actions"),this.register("ctrl+f",()=>this.focusSearch(),"Focus search","Actions"),this.register("ctrl+s",()=>this.saveForm(),"Save current form","Actions"),this.register("escape",()=>this.closeAll(),"Close modal/menu","General"),this.register("ctrl+k",()=>this.dispatch("open-command-palette"),"Command palette","General")},register(e,t,r="",n="General"){const s=this.normalizeCombo(e);this.shortcuts.set(s,{combo:s,displayCombo:e,action:t,description:r,category:n})},unregister(e){const t=this.normalizeCombo(e);this.shortcuts.delete(t)},normalizeCombo(e){return e.toLowerCase().replace(/cmd\+/g,"meta+").replace(/command\+/g,"meta+").replace(/\s+/g," ").trim()},handleKeydown(e){if(this.isEditableElement(e.target)&&e.key!=="Escape")return;const t=this.buildCombo(e),r=Date.now();if(r-this.lastKeyTime<1e3&&this.sequenceBuffer){const n=`${this.sequenceBuffer} ${t}`;if(this.tryExecute(n,e)){this.clearSequence();return}}if(this.tryExecute(t,e)){this.clearSequence();return}this.isSequenceStarter(t)&&(this.sequenceBuffer=t,this.lastKeyTime=r,clearTimeout(this.sequenceTimeout),this.sequenceTimeout=setTimeout(()=>{this.clearSequence()},1e3))},buildCombo(e){const t=[];e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta");let r=e.key.toLowerCase();return r===" "&&(r="space"),r==="arrowup"&&(r="up"),r==="arrowdown"&&(r="down"),r==="arrowleft"&&(r="left"),r==="arrowright"&&(r="right"),["control","alt","shift","meta"].includes(r)||t.push(r),t.join("+")},tryExecute(e,t){const r=this.shortcuts.get(e);if(r){t.preventDefault(),t.stopPropagation();try{r.action()}catch(n){console.error(`Shortcut error [${e}]:`,n)}return!0}return!1},isSequenceStarter(e){for(const[t]of this.shortcuts)if(t.startsWith(e+" "))return!0;return!1},clearSequence(){this.sequenceBuffer="",clearTimeout(this.sequenceTimeout)},isEditableElement(e){const t=e.tagName.toLowerCase(),r=t==="input"||t==="textarea"||t==="select",n=e.isContentEditable;return r||n},toggleHelp(){this.showHelp=!this.showHelp},navigate(e){window.location.href=e},dispatch(e,t={}){window.dispatchEvent(new CustomEvent(e,{detail:t}))},focusSearch(){const e=document.querySelector('#search, [data-search], input[type="search"]');e&&(e.focus(),e.select())},saveForm(){const e=document.querySelector("form:not([data-no-save])");e&&e.requestSubmit()},closeAll(){this.dispatch("close-all"),document.querySelectorAll(".modal.show").forEach(t=>{var n,s;const r=(s=(n=window.bootstrap)==null?void 0:n.Modal)==null?void 0:s.getInstance(t);r&&r.hide()}),document.querySelectorAll(".dropdown-content.show, .dropdown-menu.show").forEach(t=>t.classList.remove("show")),this.showHelp=!1},getGroupedShortcuts(){const e={};for(const[,t]of this.shortcuts){const r=t.category||"General";e[r]||(e[r]=[]),e[r].push(t)}return e},formatShortcut(e){const t=navigator.platform.toUpperCase().indexOf("MAC")>=0;return e.split(" ").map(r=>r.split("+").map(n=>{const s=n.replace(/^meta$/i,t?"⌘":"Ctrl").replace(/^ctrl$/i,t?"⌃":"Ctrl").replace(/^alt$/i,t?"⌥":"Alt").replace(/^shift$/i,t?"⇧":"Shift").replace(/^escape$/i,"Esc").replace(/^enter$/i,"↵").replace(/^space$/i,"Space").replace(/^up$/i,"↑").replace(/^down$/i,"↓").replace(/^left$/i,"←").replace(/^right$/i,"→");return s.length===1?s.toUpperCase():s}).join(t?"":"+")).join(" then ")}}}function Ca(){return{isOpen:!1,title:"",content:"",size:"md",loading:!1,closeable:!0,onClose:null,onOpen:null,init(){this._closeAllHandler=()=>this.close(),this._escapeHandler=e=>{e.key==="Escape"&&this.isOpen&&this.closeable&&this.close()},window.addEventListener("close-all",this._closeAllHandler),document.addEventListener("keydown",this._escapeHandler)},destroy(){window.removeEventListener("close-all",this._closeAllHandler),document.removeEventListener("keydown",this._escapeHandler)},async open(e={}){if(this.title=e.title||"",this.size=e.size||"md",this.closeable=e.closeable!==!1,this.onClose=e.onClose||null,this.onOpen=e.onOpen||null,e.url){this.loading=!0,this.content="",this.isOpen=!0;try{const t=await fetch(e.url,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}});if(!t.ok)throw new Error(`HTTP ${t.status}`);this.content=await t.text()}catch(t){console.error("Modal load error:",t),this.content=`
            <div class="alert alert-error">
              <span>Failed to load content. Please try again.</span>
            </div>
          `}finally{this.loading=!1}}else this.content=e.content||"",this.isOpen=!0;this.$nextTick(()=>{const t=this.$refs.dialog;if(t){const r=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');r&&r.focus()}this.onOpen&&this.onOpen()}),document.body.style.overflow="hidden"},close(){this.closeable&&(this.isOpen=!1,document.body.style.overflow="",this.onClose&&this.onClose(),setTimeout(()=>{this.content="",this.title="",this.loading=!1},200))},async submitForm(e){var s;e.preventDefault();const t=e.target;let r=t.action;const n=t.method.toUpperCase();this.loading=!0;try{const a=new FormData(t),i=(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content,l={method:n,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}};if(i&&(l.headers["X-CSRF-TOKEN"]=i),n==="GET"){const o=new URLSearchParams(a);r+="?"+o.toString()}else l.body=a;const c=await fetch(r,l);let u;const f=c.headers.get("content-type");if(f&&f.includes("application/json"))u=await c.json();else{const o=await c.text();throw new Error(c.ok?"Unexpected response format":`Server error: ${c.status}`)}if(!c.ok){if(c.status===422&&u.errors)this.showValidationErrors(t,u.errors);else throw new Error(u.message||"Request failed");return}window.dispatchEvent(new CustomEvent("modal-success",{detail:{data:u,form:t.id||null}})),u.message&&window.dispatchEvent(new CustomEvent("toast",{detail:{message:u.message,type:"success"}})),this.close(),u.reload?window.location.reload():u.redirect&&(window.location.href=u.redirect)}catch(a){console.error("Form submission error:",a),window.dispatchEvent(new CustomEvent("toast",{detail:{message:a.message||"An error occurred",type:"error"}}))}finally{this.loading=!1}},showValidationErrors(e,t){e.querySelectorAll(".input-error, .select-error, .textarea-error").forEach(r=>{r.classList.remove("input-error","select-error","textarea-error")}),e.querySelectorAll(".error-message").forEach(r=>r.remove());for(const[r,n]of Object.entries(t)){const s=e.querySelector(`[name="${r}"]`);if(s){const a=s.tagName.toLowerCase(),i=a==="select"?"select-error":a==="textarea"?"textarea-error":"input-error";s.classList.add(i);const l=document.createElement("p");l.className="error-message text-error text-sm mt-1",l.textContent=Array.isArray(n)?n[0]:n,s.parentNode.appendChild(l)}}},getSizeClass(){const e={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};return e[this.size]||e.md}}}function gn(){return{open:!1,highlightedIndex:-1,items:[],selectedValue:null,searchQuery:"",searchTimeout:null,init(){this._handleClick=e=>{this.open&&!this.$el.contains(e.target)&&this.close()},this._handleKeydown=e=>{e.key==="Escape"&&this.open&&this.close()},this._handleDropdownOpened=e=>{e.detail.id!==this.$el.id&&this.open&&this.close()},document.addEventListener("click",this._handleClick),document.addEventListener("keydown",this._handleKeydown),window.addEventListener("dropdown-opened",this._handleDropdownOpened)},destroy(){document.removeEventListener("click",this._handleClick),document.removeEventListener("keydown",this._handleKeydown),window.removeEventListener("dropdown-opened",this._handleDropdownOpened),clearTimeout(this.searchTimeout)},toggle(){this.open?this.close():this.openDropdown()},openDropdown(){this.open=!0,this.highlightedIndex=-1,this.searchQuery="",window.dispatchEvent(new CustomEvent("dropdown-opened",{detail:{id:this.$el.id}})),this.$nextTick(()=>{const e=this.$el.querySelector(".dropdown-content, .menu");e&&(this.items=Array.from(e.querySelectorAll('li > a, li > button, [role="menuitem"]')))})},close(){this.open=!1,this.highlightedIndex=-1,this.searchQuery=""},select(e,t){var r,n;this.selectedValue=e,this.$dispatch("dropdown-select",{value:e}),(n=(r=t==null?void 0:t.target)==null?void 0:r.dataset)!=null&&n.keepOpen||this.close()},handleKeydown(e){if(!this.open){(e.key==="ArrowDown"||e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.openDropdown());return}switch(e.key){case"ArrowDown":e.preventDefault(),this.highlightNext();break;case"ArrowUp":e.preventDefault(),this.highlightPrevious();break;case"Enter":case" ":e.preventDefault(),this.highlightedIndex>=0&&this.items[this.highlightedIndex]&&this.items[this.highlightedIndex].click();break;case"Home":e.preventDefault(),this.highlightedIndex=0,this.scrollToHighlighted();break;case"End":e.preventDefault(),this.highlightedIndex=this.items.length-1,this.scrollToHighlighted();break;case"Tab":this.close();break;default:e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&this.handleTypeAhead(e.key);break}},highlightNext(){this.highlightedIndex<this.items.length-1?this.highlightedIndex++:this.highlightedIndex=0,this.scrollToHighlighted()},highlightPrevious(){this.highlightedIndex>0?this.highlightedIndex--:this.highlightedIndex=this.items.length-1,this.scrollToHighlighted()},scrollToHighlighted(){const e=this.items[this.highlightedIndex];e&&e.scrollIntoView({block:"nearest"})},handleTypeAhead(e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchQuery=""},500),this.searchQuery+=e.toLowerCase();const t=this.highlightedIndex+1;let r=!1;for(let n=t;n<this.items.length;n++)if(this.matchesSearch(this.items[n])){this.highlightedIndex=n,r=!0;break}if(!r){for(let n=0;n<t;n++)if(this.matchesSearch(this.items[n])){this.highlightedIndex=n;break}}this.scrollToHighlighted()},matchesSearch(e){var r;return(((r=e.textContent)==null?void 0:r.toLowerCase())||"").startsWith(this.searchQuery)},isHighlighted(e){return this.highlightedIndex===e}}}function Ta(e={}){return{...gn(),value:e.value||null,options:e.options||[],placeholder:e.placeholder||"Select...",searchable:e.searchable||!1,multiple:e.multiple||!1,selectedValues:e.multiple?Array.isArray(e.value)?e.value:[]:[],filterQuery:"",getDisplayText(){if(this.multiple){if(this.selectedValues.length===0)return this.placeholder;if(this.selectedValues.length===1){const r=this.options.find(n=>n.value===this.selectedValues[0]);return(r==null?void 0:r.label)||this.placeholder}return`${this.selectedValues.length} selected`}if(!this.value)return this.placeholder;const t=this.options.find(r=>r.value===this.value);return(t==null?void 0:t.label)||this.placeholder},selectOption(t){if(this.multiple){const r=this.selectedValues.indexOf(t);r>=0?this.selectedValues.splice(r,1):this.selectedValues.push(t),this.$dispatch("change",{value:this.selectedValues})}else this.value=t,this.$dispatch("change",{value:this.value}),this.close()},isSelected(t){return this.multiple?this.selectedValues.includes(t):this.value===t},clear(){this.multiple?(this.selectedValues=[],this.$dispatch("change",{value:[]})):(this.value=null,this.$dispatch("change",{value:null}))}}}function Ft(e={}){return{url:e.url||"",minLength:e.minLength??1,valueField:e.valueField||"id",labelField:e.labelField||"name",target:e.target||null,params:e.params||{},debounceMs:e.debounceMs||300,maxResults:e.maxResults||10,allowCreate:e.allowCreate||!1,createLabel:e.createLabel||'Create "{query}"',query:e.initialQuery||"",suggestions:[],open:!1,loading:!1,selectedValue:e.initialValue||null,selectedItem:null,highlightedIndex:-1,abortController:null,init(){this.selectedValue&&e.initialLabel&&(this.query=e.initialLabel),this._clickOutsideHandler=t=>{this.open&&!this.$el.contains(t.target)&&this.close()},document.addEventListener("click",this._clickOutsideHandler)},destroy(){document.removeEventListener("click",this._clickOutsideHandler)},async search(){if(this.abortController&&this.abortController.abort(),this.query.length<this.minLength){this.suggestions=[],this.close();return}this.selectedItem&&this.query!==this.getLabel(this.selectedItem)&&(this.selectedValue=null,this.selectedItem=null,this.updateTarget(null)),this.loading=!0,this.abortController=new AbortController;try{const t=new URLSearchParams({q:this.query,limit:this.maxResults,...this.params}),r=await fetch(`${this.url}?${t}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},signal:this.abortController.signal});if(!r.ok)throw new Error(`HTTP ${r.status}`);const n=await r.json();this.suggestions=Array.isArray(n)?n:n.data||n.results||[],this.allowCreate&&this.query&&!this.suggestions.some(s=>this.getLabel(s).toLowerCase()===this.query.toLowerCase())&&this.suggestions.push({[this.valueField]:"__create__",[this.labelField]:this.createLabel.replace("{query}",this.query),__isCreate:!0,__createValue:this.query}),this.open=this.suggestions.length>0,this.highlightedIndex=-1}catch(t){t.name!=="AbortError"&&(console.error("Autocomplete search error:",t),this.suggestions=[])}finally{this.loading=!1}},select(t){t.__isCreate?(this.$dispatch("autocomplete-create",{value:t.__createValue,target:this.target}),this.query=t.__createValue,this.selectedValue=null,this.selectedItem=null):(this.selectedItem=t,this.selectedValue=this.getValue(t),this.query=this.getLabel(t),this.updateTarget(this.selectedValue),this.$dispatch("autocomplete-select",{item:t,value:this.selectedValue,target:this.target})),this.close()},clear(){this.query="",this.selectedValue=null,this.selectedItem=null,this.suggestions=[],this.updateTarget(null),this.$dispatch("autocomplete-clear",{target:this.target})},close(){this.open=!1,this.highlightedIndex=-1},handleKeydown(t){switch(t.key){case"ArrowDown":t.preventDefault(),!this.open&&this.suggestions.length>0?this.open=!0:this.highlightNext();break;case"ArrowUp":t.preventDefault(),this.highlightPrevious();break;case"Enter":t.preventDefault(),this.open&&this.highlightedIndex>=0&&this.select(this.suggestions[this.highlightedIndex]);break;case"Escape":t.preventDefault(),this.open?this.close():this.selectedItem&&(this.query=this.getLabel(this.selectedItem));break;case"Tab":this.open&&this.highlightedIndex>=0&&this.select(this.suggestions[this.highlightedIndex]),this.close();break}},highlightNext(){this.highlightedIndex<this.suggestions.length-1?this.highlightedIndex++:this.highlightedIndex=0,this.scrollToHighlighted()},highlightPrevious(){this.highlightedIndex>0?this.highlightedIndex--:this.highlightedIndex=this.suggestions.length-1,this.scrollToHighlighted()},scrollToHighlighted(){this.$nextTick(()=>{const t=this.$el.querySelector("ul, .dropdown-content"),r=t==null?void 0:t.children[this.highlightedIndex];r&&r.scrollIntoView({block:"nearest"})})},getValue(t){return t[this.valueField]},getLabel(t){return t[this.labelField]||""},updateTarget(t){var r;if(this.target){const n=`[name="${this.target}"], #${this.target}`,s=this.$el.querySelector(n)||((r=this.$el.closest("form"))==null?void 0:r.querySelector(n))||document.querySelector(n);s&&(s.value=t||"",s.dispatchEvent(new Event("change",{bubbles:!0})))}},isHighlighted(t){return this.highlightedIndex===t},handleFocus(){this.query.length>=this.minLength&&this.suggestions.length>0&&(this.open=!0)},handleBlur(){setTimeout(()=>{this.$el.contains(document.activeElement)||this.close()},200)}}}function Ia(e={}){const t=Ft(e);return{...t,options:e.options||[],filteredOptions:[],init(){t.init&&t.init.call(this),this.filteredOptions=this.options},search(){const r=this.query.toLowerCase();r?this.filteredOptions=this.options.filter(n=>this.getLabel(n).toLowerCase().includes(r)):this.filteredOptions=this.options,this.suggestions=this.filteredOptions,this.open=!0,this.highlightedIndex=-1},toggle(){this.open?this.close():(this.suggestions=this.options,this.open=!0)}}}function Oa(e={}){const t=Ft(e);return{...t,selectedItems:e.initialItems||[],init(){t.init&&t.init.call(this)},select(r){r.__isCreate?this.$dispatch("autocomplete-create",{value:r.__createValue,target:this.target}):this.selectedItems.some(s=>this.getValue(s)===this.getValue(r))||(this.selectedItems.push(r),this.updateTargets(),this.$dispatch("autocomplete-select",{item:r,items:this.selectedItems,target:this.target})),this.query="",this.close()},removeItem(r){const n=this.selectedItems.findIndex(s=>this.getValue(s)===this.getValue(r));n>=0&&(this.selectedItems.splice(n,1),this.updateTargets(),this.$dispatch("autocomplete-remove",{item:r,items:this.selectedItems,target:this.target}))},updateTargets(){this.target&&(this.$el.querySelectorAll(`input[name="${this.target}[]"]`).forEach(r=>r.remove()),this.selectedItems.forEach(r=>{const n=document.createElement("input");n.type="hidden",n.name=`${this.target}[]`,n.value=this.getValue(r),this.$el.appendChild(n)}))},clear(){this.selectedItems=[],this.query="",this.updateTargets(),this.$dispatch("autocomplete-clear",{target:this.target})}}}function We(e={}){return{resource:e.resource||"",field:e.field||"",method:e.method||"PUT",emptyText:e.emptyText||"—",type:e.type||"text",originalValue:e.value??"",currentValue:e.value??"",editing:!1,saving:!1,error:null,get displayValue(){return this.currentValue||this.emptyText},startEdit(){this.editing=!0,this.error=null,this.$nextTick(()=>{const t=this.$el.querySelector("input, textarea, select");t&&(t.focus(),(t.type==="text"||t.tagName==="TEXTAREA")&&t.select())})},cancel(){this.currentValue=this.originalValue,this.editing=!1,this.error=null},async save(){var t,r,n;if(this.currentValue===this.originalValue){this.editing=!1;return}this.saving=!0,this.error=null;try{const s=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content,a=await fetch(this.resource,{method:this.method,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...s?{"X-CSRF-TOKEN":s}:{}},body:JSON.stringify({[this.field]:this.currentValue})});let i;const l=a.headers.get("content-type");if(l&&l.includes("application/json"))i=await a.json();else throw new Error(a.ok?"Unexpected response format":`Server error: ${a.status}`);if(!a.ok)throw new Error(i.message||((n=(r=i.errors)==null?void 0:r[this.field])==null?void 0:n[0])||"Save failed");this.originalValue=this.currentValue,this.editing=!1,this.$dispatch("inline-edit-saved",{field:this.field,value:this.currentValue,data:i}),this.showSuccessIndicator()}catch(s){console.error("Inline edit error:",s),this.error=s.message,this.currentValue=this.originalValue,this.$dispatch("inline-edit-error",{field:this.field,error:s.message})}finally{this.saving=!1}},showSuccessIndicator(){const t=this.$el;t.classList.add("inline-edit-success"),setTimeout(()=>{t.classList.remove("inline-edit-success")},1e3)},handleKeydown(t){t.key==="Enter"&&this.type!=="textarea"?(t.preventDefault(),this.save()):t.key==="Escape"&&(t.preventDefault(),this.cancel())},handleBlur(t){setTimeout(()=>{this.$el.contains(document.activeElement)||this.save()},100)}}}function Ma(e={}){const t=We(e);return{...t,startEdit(){const r=this.$refs.content;if(r){r.contentEditable="true",r.focus();const n=document.createRange();n.selectNodeContents(r);const s=window.getSelection();s.removeAllRanges(),s.addRange(n)}this.editing=!0,this.error=null},cancel(){const r=this.$refs.content;r&&(r.contentEditable="false",r.textContent=this.originalValue),this.editing=!1,this.error=null},async save(){const r=this.$refs.content;r&&(this.currentValue=r.textContent.trim(),r.contentEditable="false"),await t.save.call(this)}}}function Pa(e={}){return{...We({...e,type:"select"}),options:e.options||[],get displayValue(){const t=this.options.find(r=>r.value==this.currentValue);return(t==null?void 0:t.label)||this.currentValue||this.emptyText},handleChange(t){this.currentValue=t.target.value,this.save()}}}function Ra(e={}){return{...We({...e,type:"date"}),format:e.format||"Y-m-d",get displayValue(){if(!this.currentValue)return this.emptyText;try{return new Date(this.currentValue).toLocaleDateString()}catch{return this.currentValue||this.emptyText}}}}function qa(e={}){const t=JSON.parse(JSON.stringify(e.fields||{}));return{resource:e.resource||"",fields:JSON.parse(JSON.stringify(e.fields||{})),editing:!1,saving:!1,errors:{},startEdit(){this.editing=!0,this.errors={}},cancel(){for(const[r,n]of Object.entries(t))this.fields[r]=n;this.editing=!1,this.errors={}},async save(){var r;this.saving=!0,this.errors={};try{const n=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.content,s=await fetch(this.resource,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...n?{"X-CSRF-TOKEN":n}:{}},body:JSON.stringify(this.fields)});let a;const i=s.headers.get("content-type");if(i&&i.includes("application/json"))a=await s.json();else throw new Error(s.ok?"Unexpected response format":`Server error: ${s.status}`);if(!s.ok){if(s.status===422&&a.errors){this.errors=a.errors;return}throw new Error(a.message||"Save failed")}this.editing=!1,this.$dispatch("batch-edit-saved",{data:a})}catch(n){console.error("Batch edit error:",n),this.$dispatch("batch-edit-error",{error:n.message})}finally{this.saving=!1}}}}function $a(e){e.data("contextMenu",ka),e.data("keyboardShortcuts",Aa),e.data("modal",Ca),e.data("dropdown",gn),e.data("selectDropdown",Ta),e.data("autocomplete",Ft),e.data("combobox",Ia),e.data("multiAutocomplete",Oa),e.data("inlineEdit",We),e.data("contentEditable",Ma),e.data("inlineSelect",Pa),e.data("inlineDate",Ra),e.data("batchInlineEdit",qa)}let N="",Da;const R=async(e,t)=>{const r=await fetch(e);t.innerHTML=await r.text()},D=async(e,t)=>{const r=await fetch(e),n=new DOMParser().parseFromString(await r.text(),"text/html");document.getElementById(t).innerHTML=n.getElementById(t).innerHTML},I=async(e,t,r)=>{const n=await fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.head.querySelector("[name=csrf-token]").content},method:t,body:r});switch(n.status){case 500:n.text().then(function(s){alert("Unexpected result: "+s)});break;case 419:alert("Token expired. Refresh the page");break;default:return n.json()}};function he(e,t,r){var n;return function(){var s=this,a=arguments,i=function(){n=null,r||e.apply(s,a)},l=r&&!n;clearTimeout(n),n=setTimeout(i,t),l&&e.apply(s,a)}}const k=(e,t,r,n)=>{n.insertAdjacentHTML("afterbegin",'<span class="loading loading-spinner loading-sm"></span>');const s=new FormData(t);new URLSearchParams(s),footerAlert.classList.remove("alert-danger"),footerAlert.innerHTML="",I(e,"POST",s).then(a=>{if(a.errors){const i=n.querySelector(".loading");i&&i.remove(),footerAlert.innerHTML=a.message,footerAlert.classList.add("alert-danger"),Fe(a.errors,t)}else if(a.exception){const i=n.querySelector(".loading");i&&i.remove(),footerAlert.innerHTML=a.message,footerAlert.classList.add("alert-danger")}else a.redirect?location.href=a.redirect:r==="reloadModal"?R(N,ajaxModal.querySelector(".modal-body")):r==="reloadPartial"?R(N,app.querySelector(".reload-part")):location.reload()}).catch(a=>{console.log(a)})},Fe=(e,t)=>{Object.entries(e).forEach(([r,n])=>{let s=t.querySelector('[data-actarget="'+r+'"]');s||(s=t.elements[r]),s.type==="file"?footerAlert.append(" "+n[0]):(s.value="",s.placeholder=r+" is required"),s.classList.add("is-invalid")})};function Na(){app.addEventListener("click",o=>{const d=o.target.closest('[data-modal-target="#ajaxModal"]');if(d){o.preventDefault(),N=d.href,window.contentSrc=N,ajaxModal.querySelector(".modal-title").innerHTML=d.title||"Loading...";const p=ajaxModal.querySelector(".modal-box");if(p.classList.remove("max-w-sm","max-w-md","max-w-lg","max-w-xl","max-w-2xl","max-w-4xl"),d.hasAttribute("data-size")){const g={"modal-sm":"max-w-sm","modal-md":"max-w-md","modal-lg":"max-w-2xl","modal-xl":"max-w-4xl"};p.classList.add(g[d.dataset.size]||"max-w-2xl")}else p.classList.add("max-w-2xl");R(N,ajaxModal.querySelector(".modal-body")),ajaxModal.showModal()}}),app.addEventListener("show.bs.tab",o=>{o.target.id==="actorUsedInToggle"&&R(o.target.href,actorUsedIn)}),app.addEventListener("click",o=>{if(o.target.matches(".sendDocument")){const h=new FormData(sendDocumentForm);I(o.target.closest("[data-resource]").dataset.resource,"POST",h).then(y=>{y.message?alert(y.message):(document.location.href=y.mailto,o.target.closest("tr").remove())})}if(o.target.matches(".chooseTemplate")){var d=document.getElementById("selectTrForm");if(d==null){var p=document.createElement("tr");p.setAttribute("id","selectTrForm");var g=o.target.closest("tr"),w=g.parentNode,m=g.nextSibling;m?w.insertBefore(p,m):w.appendChild(p),R(o.target.dataset.url,p)}else d.remove()}switch(o.target.id){case"createMatterSubmit":k("/matter",createMatterForm,null,o.target);break;case"deleteMatter":confirm("Deleting the matter. Continue anyway?")&&I(o.target.closest("[data-resource]").dataset.resource,"DELETE").then(E=>{E.message?alert(E.message):location.href=document.referrer});break;case"addTaskToEvent":o.target.closest("tbody").insertAdjacentHTML("beforeend",addTaskFormTemplate.innerHTML),addTaskForm.trigger_id.value=o.target.dataset.event_id;break;case"addTaskSubmit":k("/task",addTaskForm,"reloadModal",o.target);break;case"deleteEvent":confirm("Deleting the event will also delete the linked tasks. Continue anyway?")&&I("/event/"+o.target.dataset.event_id,"DELETE").then(()=>R(N,ajaxModal.querySelector(".modal-body")));break;case"addEventSubmit":k("/event",addEventForm,"reloadModal",o.target);break;case"addClassifierSubmit":k("/classifier",addClassifierForm,"reloadModal",o.target);break;case"deleteTask":case"deleteClassifier":case"removeActor":I(o.target.closest("[data-resource]").dataset.resource,"DELETE").then(()=>R(N,ajaxModal.querySelector(".modal-body")));break;case"deleteTemplate":I(o.target.closest("[data-resource]").dataset.resource,"DELETE").then(()=>R(N,app.querySelector(".reload-part")));break;case"nationalizeSubmit":k("/matter/storeN",natMatterForm,null,o.target);break;case"createFamilySubmit":k("/matter/storeFamily",createMatterForm,null,o.target);break;case"createActorSubmit":k("/actor",createActorForm,null,o.target);break;case"createUserSubmit":k("/user",createUserForm,null,o.target);break;case"createDActorSubmit":k("/default_actor",createDActorForm,null,o.target);break;case"createEventNameSubmit":k("/eventname",createEventForm,null,o.target);break;case"createCountrySubmit":k("/countries",createCountryForm,null,o.target);break;case"createCategorySubmit":k("/category",createCategoryForm,null,o.target);break;case"createRoleSubmit":k("/role",createRoleForm,null,o.target);break;case"createTypeSubmit":k("/type",createTypeForm,null,o.target);break;case"createRuleSubmit":k("/rule",createRuleForm,null,o.target);break;case"createFeeSubmit":k("/fee",createFeeForm,null,o.target);break;case"createClassSubmit":k("/document",createClassForm,null,o.target);break;case"createMemberSubmit":k("/template-member",createMemberForm,null,o.target);break;case"createClassifierTypeSubmit":k("/classifier_type",createClassifierTypeForm,null,o.target);break;case"sendDocument":k("/document",sendDocumentForm,null,o.target);break;case"addEventTemplateSubmit":k("/event-class",addTemplateForm,"reloadPartial",o.target);break;case"addRuleTemplateSubmit":k("/rule-class",addTemplateForm,"reloadPartial",o.target);break;case"deleteActor":case"deleteRule":case"deleteEName":case"deleteRole":case"deleteType":case"deleteDActor":case"deleteClassifierType":case"deleteCategory":case"deleteCountry":case"deleteClass":case"deleteMember":confirm("Deleting  "+o.target.dataset.message+". Continue anyway?")&&I(o.target.dataset.url,"DELETE").then(E=>{if(E.status==="success")location.reload();else{if(E.message)return alert("Couldn't delete "+o.target.dataset.message+". Check the dependencies. Database said: "+E.message),!1;location.reload()}});break;case"regenerateTasks":confirm(`Regenerating the tasks will delete all the existing automatically created tasks and renewals for this event.
Past tasks will not be recreated - make sure they have been dealt with.
Continue anyway?`)&&I("/event/"+o.target.dataset.event_id+"/recreateTasks","POST").then(()=>R(N,ajaxModal.querySelector(".modal-body")));break;case"updateCredentials":const h=o.target.form,y=new URLSearchParams,_=h.elements.login;_.value!==_.defaultValue&&y.append("login",_.value);const x=h.elements.password;if(x.value&&(y.append("password",x.value),y.append("password_confirmation",h.elements.password_confirmation.value)),y.toString()==="")return;o.target.insertAdjacentHTML("afterbegin",'<span class="loading loading-spinner loading-sm mr-2"></span>'),o.target.disabled=!0,h.querySelectorAll(".is-valid, .is-invalid").forEach(E=>{E.classList.remove("is-valid","is-invalid");const b=E.nextElementSibling;b&&b.classList.contains("invalid-feedback")&&b.remove()}),I(h.dataset.resource,"PUT",y).then(E=>{const b=o.target.querySelector(".loading");b&&b.remove(),o.target.disabled=!1,E.errors?Object.entries(E.errors).forEach(([C,$])=>{const P=h.elements[C];if(P){P.classList.add("is-invalid");const M=document.createElement("div");M.className="invalid-feedback",M.textContent=$[0],P.parentNode.appendChild(M)}}):(Array.from(y.keys()).forEach(C=>{const $=h.elements[C];$&&$.classList.add("is-valid")}),y.has("login")&&(_.defaultValue=_.value),y.has("password")&&(x.value="",h.elements.password_confirmation.value=""))});break}if(o.target.matches("#ncountries .btn-outline-danger")&&o.target.parentNode.remove(),o.target.hasAttribute("data-panel")){o.preventDefault();let h=o.target.closest("tbody").querySelector(".table-info");h&&h.classList.remove("table-info"),o.target.closest("tr").classList.add("table-info"),N=o.target.href,window.contentSrc=N;let y=document.getElementById(o.target.dataset.panel);R(o.target.href,y)}}),app.addEventListener("change",o=>{o.target.matches(".noformat")&&setTimeout(()=>{let d=new URLSearchParams;o.target.type==="checkbox"&&(o.target.checked?o.target.value=1:o.target.value=0),d.append(o.target.name,o.target.value);let p=o.target.closest("[data-resource]").dataset.resource;I(p,"PUT",d).then(g=>{if(g.errors)ajaxModal.matches(".show")?(footerAlert.innerHTML=Object.values(g.errors)[0],footerAlert.classList.add("alert-danger")):(o.target.classList.remove("border-info","is-valid"),o.target.classList.add("border-danger"),o.target.value=Object.values(g.errors)[0]);else if(g.message&&g.status!=="success")ajaxModal.matches(".show")?(footerAlert.innerHTML=g.message,footerAlert.classList.add("alert-danger")):(o.target.classList.remove("border-info","is-valid"),o.target.classList.add("border-danger"),o.target.value="Invalid",console.log(g.message));else{if(!window.ajaxPanel&&N&&!o.target.closest(".tab-content"))R(N,ajaxModal.querySelector(".modal-body"));else{o.target.classList.remove("border-info","border-danger"),o.target.classList.add("is-valid");var w=new Event("xhrsent",{bubbles:!0});o.target.dispatchEvent(w)}footerAlert.classList.remove("alert-danger"),footerAlert.innerHTML=""}}).catch(g=>console.log(g))})}),ajaxModal.addEventListener("close",o=>{ajaxModal.querySelector(".modal-body").innerHTML='<span class="loading loading-spinner loading-lg text-primary"></span>',ajaxModal.querySelector(".modal-title").innerHTML="Ajax title placeholder";const d=ajaxModal.querySelector(".modal-box");d.classList.remove("max-w-sm","max-w-md","max-w-lg","max-w-xl","max-w-4xl"),d.classList.add("max-w-2xl"),footerAlert.innerHTML="",footerAlert.classList.remove("text-error")}),app.addEventListener("input",o=>{o.target.matches(".noformat, textarea, [contenteditable]")?o.target.classList.add("border","border-info"):o.target.classList.contains("is-invalid")&&o.target.classList.remove("is-invalid")});let e=!1;const t=function(o,d){d.setAttribute("data-selected",o.value);const p=d.dataset.actarget;if(d.id=="addCountry"){let w=appendCountryTemplate.content.children[0].cloneNode(!0);w.id="country-"+o.key,w.children[0].value=o.key,w.children[1].value=o.value,ncountries.appendChild(w),setTimeout(()=>{addCountry.value=""},200)}else if(p){d.value=o.value;const w=d.parentNode.querySelector(`input[name="${p}"]`);w.value=o.key,window.createMatterForm&&p=="category_code"&&I("/matter/new-caseref?term="+o.prefix,"GET").then(m=>{createMatterForm.caseref.value=m[0].value})}else d.value=o.key,d.addEventListener("xhrsent",w=>{d.value=o.value});const g=new CustomEvent("acCompleted",{detail:o});if(d.dispatchEvent(g),d.form){const w=Array.from(d.form.querySelectorAll('input:not([type="hidden"])')),h=(w.indexOf(d)+1)%w.length;setTimeout(()=>{w[h].focus()})}},r=async function(o,d){try{const p=new URL(o.getAttribute("data-ac"),window.location.origin),g=o.value,w=o.getAttribute("data-aclength")||1;if(g.length<w){d.classList.remove("show");return}p.searchParams.append("term",o.value);const m=await fetch(p);if(!m.ok)throw new Error("Network response was not ok");const h=await m.json();if(!Array.isArray(h))throw new Error("Invalid response format");if(d.innerHTML="",h.length===0){d.classList.remove("show");return}h.forEach(y=>{const _=document.createElement("a");_.classList.add("dropdown-item"),_.href="#",_.textContent=y.label||y.value,_.addEventListener("mousedown",function(x){e=!0,t(y,o)}),d.appendChild(_)}),d.classList.add("show")}catch(p){console.error("Autocomplete error:",p),d.classList.remove("show")}},n=function(o){o.setAttribute("data-oldvalue",o.value);const d=document.createElement("ul");d.classList.add("dropdown-menu"),d.classList.add("py-0"),o.insertAdjacentElement("afterend",d),o.addEventListener("input",function(){r(o,d)}),o.addEventListener("blur",function(){d.innerHTML="",d.classList.remove("show")}),o.addEventListener("change",function(p){const g=o.getAttribute("data-actarget");if(g&&o.value.trim()===""){const w=document.querySelector(`input[name="${g}"]`);w.value=""}e||o.value!==""&&(o.value=o.dataset.oldvalue||o.dataset.selected||"",p.stopPropagation()),e=!1}),o.addEventListener("keydown",function(p){const g=d.querySelectorAll(".dropdown-item"),w=d.querySelector(".active");switch(p.key){case"Tab":case"ArrowDown":p.preventDefault(),w?(w.classList.remove("active"),w.nextElementSibling?w.nextElementSibling.classList.add("active"):g[0].classList.add("active")):g.length>0&&g[0].classList.add("active");break;case"ArrowUp":p.preventDefault(),w?(w.classList.remove("active"),w.previousElementSibling?w.previousElementSibling.classList.add("active"):g[g.length-1].classList.add("active")):g.length>0&&g[g.length-1].classList.add("active");break;case"Enter":w&&w.dispatchEvent(new Event("mousedown"));break;case"Escape":d.innerHTML="",d.classList.remove("show"),p.stopPropagation();break}})},s=function(o){if(o.dataset.comboboxReady)return;const d=o.dataset.comboboxTarget;if(!d)return;const g=(o.closest("form")||document).querySelector(d);if(!(g instanceof HTMLSelectElement))return;const w=o.getAttribute("list"),m=w?document.getElementById(w):null,h=Array.from(g.options).map(b=>({element:b,code:b.value,label:b.textContent.trim()})),y=b=>h.find(C=>String(C.code)===String(b))||null,_=(b,C=!1)=>{const $=b.trim().toLowerCase();if(!$)return null;let P=h.find(M=>M.label.toLowerCase()===$);if(!P&&m){const M=Array.from(m.options).find(Y=>Y.value.trim().toLowerCase()===$);if(M){const Y=M.dataset.code??M.value;P=h.find(Le=>String(Le.code)===String(Y))||null,P||(P={code:Y,label:M.value})}}return!P&&C&&(P=h.find(M=>M.label.toLowerCase().startsWith($))),P||null},x=b=>{const C=b?b.code:"";g.value!==C&&(g.value=C,g.dispatchEvent(new Event("change",{bubbles:!0}))),b&&(o.value=b.label)},E=()=>{const b=y(g.value);b?(o.value=b.label,o.classList.remove("text-base-content/50")):g.value||(o.value="")};o.addEventListener("focus",()=>{o.select()}),o.addEventListener("input",b=>{const C=_(b.target.value);C?x(C):b.target.value.trim()||x(null)}),o.addEventListener("change",b=>{const C=_(b.target.value,!0);C?x(C):E()}),o.addEventListener("blur",()=>{const b=_(o.value,!0);b?x(b):E()}),g.addEventListener("change",()=>{document.activeElement!==o&&E()}),o.value.trim()||E(),o.dataset.comboboxReady="true"},a=function(o){if(o.dataset.filterReady)return;const d=o.getAttribute("data-filter-target");if(!d)return;const g=(o.closest("form")||document).querySelector(d);if(!(g instanceof HTMLSelectElement))return;const w=Array.from(g.options).map(h=>({element:h,originalHidden:h.hidden,text:h.textContent.toLowerCase()})),m=h=>{const y=h.trim().toLowerCase();w.forEach(({element:_,originalHidden:x,text:E})=>{if(!x){if(y===""){_.hidden=!1;return}_.hidden=!E.includes(y)}})};o.addEventListener("input",h=>{m(h.target.value)}),o.addEventListener("keydown",h=>{if(h.key==="Enter"){h.preventDefault();const y=w.find(({element:_,originalHidden:x})=>!_.hidden&&!x);y&&(g.value=y.element.value,g.dispatchEvent(new Event("change",{bubbles:!0})))}}),o.dataset.filterReady="true"};document.querySelectorAll("[data-ac]").forEach(o=>{n(o)}),document.querySelectorAll("[data-combobox-target]").forEach(o=>{s(o)}),document.querySelectorAll("[data-filter-input]").forEach(o=>{a(o)}),new MutationObserver(function(o){o.forEach(function(d){d.addedNodes.forEach(function(p){p.nodeType===Node.ELEMENT_NODE&&(p.querySelectorAll("[data-ac]").forEach(h=>{h.hasAttribute("data-oldvalue")||n(h)}),p.querySelectorAll("[data-combobox-target]").forEach(h=>{s(h)}),p.querySelectorAll("[data-filter-input]").forEach(h=>{a(h)}))})})}).observe(document.body,{childList:!0,subtree:!0}),app.addEventListener("focusout",o=>{if(o.target.matches("[contenteditable]")&&o.target.innerText!==Da){let d=new URLSearchParams;d.append(o.target.dataset.name,o.target.innerText);let p=o.target.closest("[data-resource]").dataset.resource;I(p,"PUT",d).then(g=>{o.target.classList.remove("border-info")})}});var f;ajaxModal.addEventListener("dragstart",o=>{o.dataTransfer.dropEffect="move",o.dataTransfer.setData("text/plain",null),f=o.target.parentNode,o.target.classList.replace("bg-light","bg-info")}),ajaxModal.addEventListener("dragover",o=>{let d=o.target.closest(f.tagName);d&&(f.rowIndex>d.rowIndex?d.parentNode.insertBefore(f,d):d.parentNode.insertBefore(f,d.nextSibling))}),ajaxModal.addEventListener("drop",o=>{o.preventDefault()}),ajaxModal.addEventListener("dragend",o=>{for(const d of f.parentNode.children)if(d.rowIndex!=d.dataset.n){let p=d.querySelector('[name="display_order"]');p.value=d.rowIndex,d.dataset.n=d.rowIndex;let g=new URLSearchParams;g.append("display_order",p.value),I(d.dataset.resource,"PUT",g)}f=""}),app.addEventListener("xhrsent",o=>{const d=o.target.closest(".reload-part");d&&d.dataset.resource&&R(d.dataset.resource,d)}),app.addEventListener("change",o=>{if(o.target.matches("#nameLocaleSelect")){const d=o.target.value,p=o.target.parentElement.querySelector('input[type="text"]'),g=document.getElementById("nameInputs"),w=g.querySelector(`input[data-locale="${d}"]`);p.name=`name[${d}]`,p.value=w?w.value:"";const m=()=>{const h=g.querySelector(`input[data-locale="${d}"]`);h&&(h.value=p.value)};p.removeEventListener("input",m),p.addEventListener("input",m)}else if(o.target.matches("#nameLocaleSelectReadonly")){const d=o.target.value,p=o.target.parentElement.querySelector("span"),g=o.target.closest(".reload-part");g&&g.dataset.resource&&fetch(g.dataset.resource+"?locale="+d).then(w=>w.text()).then(w=>{const h=new DOMParser().parseFromString(w,"text/html").querySelector("span.form-control-sm");h&&(p.textContent=h.textContent)})}})}let mt=0;function ve(e){const r=new URLSearchParams(window.location.search).get("user_dashboard");mt=e,e==="2"&&(e=clientId.value);let n="/task?what_tasks="+e;r!=null&&(n+="&user_dashboard="+r),R(n,tasklist),n+="&isrenewals=1",R(n,renewallist);const s="/home?what_tasks="+e;D(s,"leftPanels")}function Fa(){document.getElementById("alltasks").checked=!0,ve(0),document.querySelector('[data-actarget="client_id"]').addEventListener("acCompleted",()=>{clientTasks.checked=!0,ve("2")}),filter.onchange=e=>{e.target.name==="what_tasks"&&ve(e.target.value)},filter.onclick=e=>{e.target.matches(".page-link")&&(e.preventDefault(),R(e.target.href,e.target.closest(".card-body")))},clearRenewals.onclick=()=>{let e=new URLSearchParams,t=renewallist.querySelectorAll("input:checked");if(t.length===0){alert("No renewals selected for clearing!");return}t.forEach(r=>{e.append("task_ids[]",r.id)}),e.append("done_date",renewalcleardate.value),I("/matter/clear-tasks","POST",e).then(r=>{r.errors===""?ve(mt):alert(r.errors.done_date)})},clearOpenTasks.onclick=()=>{let e=new URLSearchParams,t=tasklist.querySelectorAll("input:checked");if(t.length===0){alert("No tasks selected for clearing!");return}t.forEach(r=>{e.append("task_ids[]",r.id)}),e.append("done_date",taskcleardate.value),I("/matter/clear-tasks","POST",e).then(r=>{r.errors===""?ve(mt):alert(r.errors.done_date)})}}let Ba=()=>window.contentSrc||"",ja=e=>{window.contentSrc=e};function Ha(){window.Alpine&&window.Alpine.data("imageUpload",e=>({expanded:e.hasImage||!1,imageUrl:e.imageUrl||"",classifierId:e.classifierId||null,matterId:e.matterId,showControls:!1,async uploadImage(t){if(!t||!t.type.startsWith("image/"))return;const r=new FormData;r.append("matter_id",this.matterId),r.append("type_code","IMG"),r.append("image",t);try{const n=await fetch("/classifier",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.head.querySelector("[name=csrf-token]").content},body:r});if(n.ok){const s=await n.text();this.classifierId=parseInt(s),this.imageUrl="/classifier/"+s+"/img",this.showControls=!1}}catch(n){console.error("Upload failed:",n)}},async deleteImage(){var t,r;if(!(!this.classifierId||!confirm(((r=(t=window.appConfig)==null?void 0:t.translations)==null?void 0:r.deleteImageConfirm)||"Delete this image?")))try{await I("/classifier/"+this.classifierId,"DELETE")&&(this.imageUrl="",this.classifierId=null,this.expanded=!1,this.showControls=!1)}catch(n){console.error("Delete failed:",n)}},handleDrop(t){t.preventDefault(),t.stopPropagation();const r=t.dataTransfer.files[0];r&&this.uploadImage(r)}}))}function Ua(){let e=null,t=null,r=null;function n(){return e||(e=document.createElement("div"),e.id="actorPopover",e.className="absolute z-50 bg-base-100 border border-base-300 rounded-lg shadow-lg p-2 w-72",e.innerHTML=actorPopoverTemplate.content.firstElementChild.outerHTML,e.style.display="none",document.body.appendChild(e)),e}function s(){const l=n(),c=l.querySelector("#actorName"),u=l.querySelector("#roleName");t&&c&&(c.removeEventListener("acCompleted",t),t=null),r&&u&&(u.removeEventListener("acCompleted",r),r=null)}function a(){const l=n();l.style.display="none";const c=l.querySelector("#addActorForm");c&&c.reset(),s()}function i(l){const c=n(),u=c.querySelector("#addActorForm"),f=c.querySelector("#roleName"),o=c.querySelector("#actorName"),d=c.querySelector("#actorShared"),p=c.querySelector("#actorNotShared"),g=l.getBoundingClientRect();c.style.position="fixed",c.style.top=g.bottom+5+"px",c.style.left=Math.max(10,g.left-100)+"px",c.style.display="block",l.hasAttribute("data-role_code")?(u.role.value=l.dataset.role_code,f.setAttribute("placeholder",l.dataset.role_name),u.shared.value=l.dataset.shareable,l.dataset.shareable==="1"?d.checked=!0:p.checked=!0,o.focus()):(u.role.value="",f.setAttribute("placeholder","Role"),u.shared.value="1",d.checked=!0,f.focus()),t=h=>{const y=h.detail;y.key==="create"?I("/actor","POST",new URLSearchParams("name="+y.value.toUpperCase()+"&default_role="+u.role.value)).then(_=>{u.actor_id.value=_.id,o.classList.add("input-success"),o.value=_.name}):u.actor_id.value=y.key},o.addEventListener("acCompleted",t),r=h=>{const y=h.detail;u.shared.value=y.shareable,y.shareable?d.checked=!0:p.checked=!0},f.addEventListener("acCompleted",r),d.onclick=()=>{u.shared.value="1"},p.onclick=()=>{u.shared.value="0"};const w=c.querySelector("#addActorSubmit");w.onclick=()=>{const h=new FormData(u),y=new URLSearchParams(h);I("/actor-pivot","POST",y).then(_=>{_.errors?Fe(_.errors,u):(a(),D(window.location.href,"actorPanel"))})};const m=c.querySelector("#popoverCancel");m.onclick=()=>{a()}}if(document.addEventListener("click",l=>{const c=l.target.closest(".add-actor-btn");if(c){l.preventDefault(),l.stopPropagation(),n().style.display==="block"&&a(),i(c);return}e&&e.style.display==="block"&&(e.contains(l.target)||a())}),titlePanel&&!titlePanel.querySelector("dt")){const l=titlePanel.querySelector('[role="button"]');l&&l.click()}titlePanel&&(titlePanel.onclick=l=>{if(l.target.id=="addTitleSubmit"){const c=new FormData(addTitleForm),u=new URLSearchParams(c);I("/classifier","POST",u).then(f=>{f.errors?(Fe(f.errors,addTitleForm),footerAlert&&(footerAlert.innerHTML=f.message,footerAlert.classList.add("alert-error"))):D(window.location.href,"titlePanel")})}}),ajaxModal.addEventListener("close",l=>{switch(Ba().split("/")[5]){case"roleActors":D(window.location.href,"actorPanel");break;case"events":case"tasks":case"renewals":case"classifiers":D(window.location.href,"multiPanel");break;case"edit":D(window.location.href,"refsPanel");break}ja("")}),ajaxModal.onclick=l=>{switch(l.target.id){case"sumButton":var c=document.getElementById("tocopy"),u=getSelection();u.removeAllRanges();var f=document.createRange();f.selectNodeContents(c),u.addRange(f);var o=document.execCommand("copy");return u.removeAllRanges(),o;case"addTaskReset":l.target.closest("tr").innerHTML="";break}},dropZone.ondragover=function(){return this.classList.remove("bg-info"),this.classList.add("bg-primary"),!1},dropZone.ondragleave=function(){return this.classList.remove("bg-primary"),this.classList.add("bg-info"),!1},dropZone.ondrop=function(l){l.preventDefault(),this.classList.add("bg-info"),this.classList.remove("bg-primary");var c=l.dataTransfer.files[0],u=new FormData;return u.append("file",c),fetch(this.dataset.url,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.head.querySelector("[name=csrf-token]").content},method:"POST",body:u}).then(f=>{if(!f.ok)throw f.status==422&&alert("Only DOCX files can be processed for the moment"),new Error("Response status "+f.status);return f.blob()}).then(f=>{var o=document.createElement("a");o.style.display="none",o.href=URL.createObjectURL(f),o.download=uid.outerText+"-"+c.name,document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(f=>{console.error(f)}),!1}}function Va(){const e=new URL(window.location.href);document.querySelectorAll("#filter input").forEach(s=>{const a=e.searchParams.get(s.name);if(a){s.value=a;const i=s.parentElement.querySelector(".clear-filter");i&&(i.style.display="block")}});function r(){window.history.pushState("","phpIP",e),D(e,"tableList")}const n=document.getElementById("filter");n&&n.addEventListener("input",he(s=>{if(s.target.value.length===0){e.searchParams.delete(s.target.name);const a=s.target.parentElement.querySelector(".clear-filter");a&&(a.style.display="none")}else{e.searchParams.set(s.target.name,s.target.value);const a=s.target.parentElement.querySelector(".clear-filter");a&&(a.style.display="block")}e.searchParams.delete("page"),r()},300)),document.addEventListener("click",s=>{if(s.target.closest(".clear-filter")){const a=s.target.closest(".clear-filter"),i=a.dataset.target,l=document.querySelector(`input[name="${i}"]`);l&&(l.value="",a.style.display="none",e.searchParams.delete(i),e.searchParams.delete("page"),r())}}),ajaxModal.addEventListener("hidden.bs.modal",function(s){r()}),ajaxPanel.addEventListener("xhrsent",function(s){r()})}function Ka(){const e=new URL(window.location.href);function t(){e.searchParams.delete("page"),window.history.pushState("","phpIP",e),D(e,"matterList")}const r=document.getElementById("filterFields");r&&(r.onclick=i=>{if(i.target.matches(".sortable")){for(const l of r.getElementsByClassName("sortable"))l.classList.remove("active"),l.innerHTML="&UpDownArrow;";i.target.classList.add("active"),e.searchParams.set("sortkey",i.target.dataset.sortkey),e.searchParams.set("sortdir",i.target.dataset.sortdir),i.target.dataset.sortdir==="asc"?(i.target.dataset.sortdir="desc",i.target.innerHTML="&uarr;"):(i.target.dataset.sortdir="asc",i.target.innerHTML="&darr;"),t()}},r.addEventListener("input",he(i=>{i.target.value.length===0?e.searchParams.delete(i.target.name):e.searchParams.set(i.target.name,i.target.value),t()},500)));const n=document.getElementById("filterButtons");n&&(n.onchange=i=>{if(i.target.name==="Ctnr")i.target.checked?e.searchParams.set("Ctnr","1"):e.searchParams.delete("Ctnr"),t();else if(i.target.name==="responsible"){if(i.target.checked){const l=document.querySelector('label[for="btnshowmine"]');e.searchParams.set("responsible",l.dataset.responsible)}else e.searchParams.delete("responsible");t()}else i.target.name==="include_dead"&&(i.target.checked?e.searchParams.set("include_dead","1"):e.searchParams.delete("include_dead"),t())});const s=document.getElementById("exportList");s&&(s.onclick=i=>{let l="/matter/export"+e.search;i.preventDefault(),window.location.href=l});const a=document.getElementById("clearFilters");a&&(a.onclick=()=>{window.location.href="/matter"})}function za(){var P,M,Y,Le,Bt,jt;const e=new URL(window.location.href),t=document.getElementById("filterFields"),r=document.getElementById("grace"),n=document.getElementById("selectAll"),s=document.getElementById("tabsGroup"),a=document.getElementById("clearFilters"),i=document.getElementById("doneRenewals"),l=document.getElementById("callRenewals"),c=document.getElementById("renewalsSent"),u=document.getElementById("renewalsExport"),f=document.getElementById("renewalsInvoiced"),o=document.getElementById("invoicesPaid"),d=document.getElementById("instructedRenewals"),p=document.getElementById("lastReminderRenewals"),g=document.getElementById("reminderRenewals"),w=document.getElementById("abandonRenewals"),m=document.getElementById("lapsedRenewals"),h=document.getElementById("lapsingRenewals"),y=document.getElementById("sendLapsedRenewals"),_=document.getElementById("xmlRenewals");function x(){window.history.pushState("","phpIP",e),D(e,"renewalList")}t&&t.addEventListener("input",he(v=>{v.target.matches(".form-control")&&(v.target.value.length===0?e.searchParams.delete(v.target.name):e.searchParams.set(v.target.name,v.target.value),e.searchParams.delete("page"),x())},500)),r&&(r.onchange=v=>{v.target.checked?e.searchParams.set("grace_period","1"):e.searchParams.delete("grace_period"),x()}),n&&(n.onchange=v=>{const S=v.target.checked,T=document.getElementsByClassName("clear-ren-task");for(const j of T)j.checked=S}),s&&s.addEventListener("click",function(v){e.searchParams.delete("step"),e.searchParams.delete("invoice_step"),e.searchParams.delete("page"),v.target.hasAttribute("data-step")&&e.searchParams.set("step",v.target.dataset.step),v.target.hasAttribute("data-invoice_step")&&e.searchParams.set("invoice_step",v.target.dataset.invoice_step),window.history.pushState("","phpIP",e),D(e,"renewalList")}),a&&(a.onclick=()=>{for(const v of e.searchParams.keys())v!="step"&&v!="invoice_step"&&e.searchParams.delete(v);window.location.href=e.href}),i&&i.addEventListener("click",function(v){b(v.target,"resetting","/renewal/done")}),l&&l.addEventListener("click",function(v){b(v.target,"call","/renewal/call/1")}),c&&c.addEventListener("click",function(v){b(v.target,"call","/renewal/call/0")}),u&&(u.onclick=v=>{const S="/renewal/export";v.preventDefault(),window.location.href=S}),f&&f.addEventListener("click",function(v){b(v.target,"invoiced","/renewal/invoice/0")}),o&&(o.onclick=v=>{b(v.target,"paid","/renewal/paid")}),d&&d.addEventListener("click",function(v){b(v.target,"for payment","/renewal/topay")}),p&&p.addEventListener("click",function(v){b(v.target,"last call","/renewal/lastcall")}),g&&g.addEventListener("click",function(v){b(v.target,"reminder","/renewal/reminder")}),w&&w.addEventListener("click",function(v){b(v.target,"abandon renewals","/renewal/abandon")}),m&&m.addEventListener("click",function(v){b(v.target,"lapsed renewals","/renewal/lapsing")}),h&&h.addEventListener("click",function(v){b(v.target,"lapsed renewals","/renewal/lapsing")}),y&&y.addEventListener("click",function(v){b(v.target,"lapse communications sent","/renewal/closing")});const E=document.getElementById("invoiceRenewals");if(((Y=(M=(P=window.appConfig)==null?void 0:P.renewal)==null?void 0:M.invoice)==null?void 0:Y.backend)==="dolibarr"&&E&&E.addEventListener("click",function(v){b(v.target,"invoicing","/renewal/invoice/1")}),(jt=(Bt=(Le=window.appConfig)==null?void 0:Le.renewal)==null?void 0:Bt.general)!=null&&jt.receipt_tabs){const v=document.getElementById("receiptRenewals");v&&v.addEventListener("click",function(T){b(T.target,"registering receipt","/renewal/receipt")});const S=document.getElementById("sendReceiptsRenewals");S&&S.addEventListener("click",function(T){b(T.target,"closing renewals","/renewal/closing")})}async function b(v,S,T){v.insertAdjacentHTML("afterbegin",'<span class="loading loading-spinner loading-sm"></span>');const j=$();let F;if(j.length===0){const Ae=document.getElementById("Untildate").value;if(!Ae){alert("No renewals selected for "+S);const Ht=v.querySelector(".loading");Ht&&Ht.remove();return}const mn=document.getElementById("Fromdate").value;F=JSON.stringify({begin:mn,end:Ae})}else F=JSON.stringify({task_ids:j});const ke=new URL(window.location.href);await C(F,T).catch(Ae=>alert(Ae)),window.history.pushState("","phpIP",ke),D(ke,"renewalList");const z=v.querySelector(".loading");z&&z.remove()}function C(v,S){return new Promise(function(T,j){const F=new XMLHttpRequest;F.open("POST",S,!0),F.setRequestHeader("Content-type","application/json; charset=utf-8"),F.setRequestHeader("X-CSRF-TOKEN",document.head.querySelector("[name=csrf-token]").content),F.send(v),F.onload=function(){this.status===200&&T(JSON.parse(this.responseText).success),this.status===419&&j("Token expired. Refresh the page"),this.status===404?j("No email template found - check that your templates match your client's language"):j("Something went wrong")}})}_&&_.addEventListener("click",function(){const v=$();if(v.length===0){alert("No renewals selected for order");return}const S=JSON.stringify({task_ids:v,clear:!1}),T=new XMLHttpRequest;T.open("POST","/renewal/order",!0),T.setRequestHeader("Content-Type","application/json; charset=utf-8"),T.setRequestHeader("X-CSRF-TOKEN",document.head.querySelector("[name=csrf-token]").content),T.send(S),T.onload=function(j){if(this.status==200){const F=T.getResponseHeader("Content-Disposition").split("filename=")[1],ke=new File([T.response],F,{type:T.getResponseHeader("Content-Disposition")}),z=document.createElement("a");z.href=window.URL.createObjectURL(ke),z.download=F,document.body.appendChild(z),z.click(),document.body.removeChild(z)}else this.status==501&&alert(JSON.parse(this.responseText).error)}});function $(){const v=new Array,S=document.getElementsByClassName("clear-ren-task");for(const T of S)T.checked&&v.push(T.getAttribute("id"));return v}}function Wa(){const e=new URL(window.location.href);function t(){window.history.pushState("","phpIP",e),D(e,"actorList")}const r=document.getElementById("person");r&&(r.onchange=s=>{s.target.value.length===0?e.searchParams.delete(s.target.name):e.searchParams.set(s.target.name,s.target.value),t()});const n=document.getElementById("filterFields");n&&n.addEventListener("input",he(s=>{s.target.value.length===0?e.searchParams.delete(s.target.name):e.searchParams.set(s.target.name,s.target.value),t()},300))}function Xa(){const e=new URL(window.location.href);function t(){window.history.pushState("","phpIP",e),D(e,"userList")}const r=document.getElementById("filterFields");r&&r.addEventListener("input",he(n=>{n.target.value.length===0?e.searchParams.delete(n.target.name):e.searchParams.set(n.target.name,n.target.value),t()},300))}window.Alpine=Nt;$a(Nt);Ha();Nt.start();window.fetchInto=R;window.fetchREST=I;window.reloadPart=D;window.debounce=he;window.submitModalForm=k;window.processSubmitErrors=Fe;window.contentSrc="";document.addEventListener("DOMContentLoaded",()=>{Na(),document.getElementById("alltasks")&&Fa(),document.getElementById("actorPanel")&&Ua(),document.getElementById("tableList")&&Va(),document.getElementById("matterList")&&Ka(),document.getElementById("renewalList")&&za(),document.getElementById("actorList")&&Wa(),document.getElementById("userList")&&Xa()});
